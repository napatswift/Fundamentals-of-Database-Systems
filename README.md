# บทท 1 ระบบฐานข้อมูลเบื้องต้น

## 1.1 ระบบแฟ้มข้อมูล

ในยุคที่คอมพิวเตอร์ยังไม่เป็นที่แพร่หลาย องค์กรต่างๆ จัดดําเนินการข้อมูลโดยอาศัยระบบแฟ้มข้อมูลซึ่งเป็น
กระดาษ เช่น แฟ้มข้อมูลนักศึกษาที่ถูกจัดดําเนินการโดยฝ่ายงานทะเบียนนักศึกษา, แฟ้มข้อมูลลูกค้าและคําสั่งซื้อที่
ถูกจัดดําเนินการโดยฝ่ายขาย และสมุดรายนามผู้ใช้โทรศัพท์ ต่อมาคอมพิวเตอร์ถูกนํามาประยุกต์ใช้อย่างแพร่หลาย
เพื่อเพิ่มประสิทธิภาพในการจัดดําเนินการข้อมูลให้สะดวกรวดเร็วและลดค่าใช้จ่ายในส่วนของกระดาษเพราะข้อมูลจะ
ถูกบันทึกเป็นรูปแบบอิเล็กทรอนิกส์แทน เรียกว่า แฟ้มข้อมูลคอมพิวเตอร์ (computer-based data file) ในยุคนี้การ
จัดดําเนินการข้อมูลอาศัย การประมวลผลแฟ้มข้อมูลคอมพิวเตอร์ (traditional file processing) ซิ่งเป็นการใช้
โปรแกรมประยุกต์ (application) เข้าถึงแฟ้มข้อมูลคอมพิวเตอร์ในอุปกรณ์หน่วยเก็บผ่านทางระบบปฏิบัติการ
คอมพิวเตอร์ (operating sytem : OS) โดยตรง อย่างไรก็ตาม ระบบประมวลผลแฟ้มข้อมูลคอมพิวเตอร์พบขีดจํากัด
เมื่อข้อมูลมีขนาดและความหลากหลายมากขึ้นอันเนื่องมาจากความต้องการรายการเปลี่ยนแปลง (transaction) ที่มี
ความชับข้อนมากขึ้น

การทำความเข้าใจในข้อดีข้อเสียของระบบประมวลผลแฟ้มข้อมูลคอมพิวเตอร์ซึ่งนำไปสู่การคิดค้นระบบฐานข้อมูล จําเป็นต้องอาศัยความรู้เกี่ยวกับคําศัพท์พื้นฐานในบริบทของระบบแฟ้มข้อมูล ดังรายละเอียดต่อไปนี้

### 1.1.1 คําศัพท์พื้นฐานในบริบทของระบบแฟ้มข้อมูล

ข้อมูล (data) หมายถึง ข้อเท็จจริงที่ทราบ สามารถถูกจัดเก็บ และมีความหมายต่อผู้ใช้ เช่น ชื่อ, รหัสนักศึกษา, ที่อยู่

ฟิลด์ (field) หรือ เขตข้อมูล หมายถึง กลุ่มข้อมูลที่มีความหมายประเภทเดียวกัน เช่น ฟีลด์รหัสนักศึกษาประกอบไปด้วยกลุ่มข้อมูลตัวเลข 52000001 ถึง 52000700 ข้อมูลเหล่านี้มีความหมายประเภทเดียวกันคือเป็นรหัสนักศึกษาที่สมัครเรียนในปีการศึกษา 2552 และฟิลด์ชื่อลูกค้าที่ส่งคำส่งคำสั่งซื้อประจำสัปดาห์ประกอบด้วยกลุ่มข้อมูล นางสาวหญิง กุลสตรี, นางรัศมี สุขฤดี, นายฤกษ์ ธรรมชาติ และนายเจริญ มั่งมี ข้อมูลเหล่านี้หมายถึงชื่อของลูกค้า

ระเบียน (record) หรือ ระเบียน หมายถึง ข้อมูลจากฟิลด์ต่างๆ ซึ่งเป็นข้อมูลที่มีความสัมพันธ์กัน เช่น ระเบียนนักศึกษาที่เรียนวิชาการตลาดประจําภาคการศึกษาประกอบด้วยข้อมูล 52000190 จากฟีลด์รหัสนักศึกษา, ข้อมูล นายเก่ง ตั้งใจเรียน จากฟีลด์ชื่อนักศึกษา, ข้อมูล นางรัศมี สุขฤดี จากฟิลด์ชื่ออาจารย์ที่ปรึกษา, ข้อมูล 3010
จากเลขโทรศัพท์ภายในของอาจารย์ที่ปรึกษา และข้อมูล 99 ในฟีลด์คะแนนสะสมซึ่งข้อมูลเหล่านี้มีความความสัมพันกันในแง่ที่ว่าเกี่ยวข้องกับนักศึกษาคนเดียวกันที่ชื่อนายเก่ง ตั้งใจเรียน อีกตัวอย่างคือ ระเบียนรายการเปลี่ยนแปลงในบัญชีเงินฝากออมทรัพย์ของนายเจริญ มั่งมี ประกอบไปด้วยข้อมูล 01/01/53 ในฟิลด์วันที่ทํารายการเปลี่ยนแปลง, ไม่มีข้อมูลในฟีลด์จํานวนเงินที่ถอน, ข้อมูล 40,000 บาทในฟิลด์จํานวนเงินที่ฝาก และข้อมูล 900,000 บาทในฟิลด์จํานวนเงินคงเหลือ ข้อมูลดังกล่าวมีความสัมพันธ์กันเพราะเกิดจากการทํารายการเปลี่ยนแปลงฝากเงิน 40,000 บาทในบัญชีเงินฝากออมทรัพย์ของนายเจริญ มั่งมี ณ วันที่ 01/01/53 ทําให้จํานวนเงินคงเหลือเพิ่มขึ้นเป็น 9000,000 บาท

แฟ้มข้อมูล (data file) หมายถึง กลุ่มระเบียนที่มีความสัมพันธ์กันและถูกบันทึกไว้ด้วยกันอย่างมีลําดับ
หรือไม่มีลําดับ เช่น แฟ้มข้อมูลรายการเปลี่ยนแปลงในบัญชีเงินฝากออมทรัพย์ของนายเจริญ เก
กลุ่มระเบียนรายการเปลี่ยนแปลงต่างๆ ที่นายเจริญ มั่งมี เคยทําไว้โดยถูกบันทึกตามวันเวลาที่ทํารายการเปลี่ยนแปลง, และแฟ้มข้อมูลนักศึกษาที่เรียนวิชาการตลาดประจําภาคการศึกษาจะบันทึกกลุ่มระเบียนของนักศึกษาแต่ละคนที่ลงทะเบียนเรียนในวิชาดังกล่าวโดยอาจเรียงลําดับตามรหัสนักศึกษาดังแสดงในรูปที่ 1.1

รหัสนักศึกษา| ชื่อ  |อาจารย์ที่ปรึกษา | หมายเลขโทรศัพท์ภายใน | คะแนนสะสม
-------- | --- | ----------- | ------------------| ---------
52000190 | นายเก่ง ตั้งใจเรียน |นางรัศมี สุขฤดี|3010|99
52000192 | นายสมหมาย ขยันยิ่ง|นางรัศมี สุขฤดี|3010|95
52000200 | นางสาวฤดี หทัย|นายฤกษ์ ธรรมชาติ|3017|87
52000201 | นางสาวหญิง กุลสตรี|นายฤกษ์ ธรรมชาติ|3017|76
52000203 | นายคณิต ใฝ่ดี |นางรัศมี สุขฤดี|3010|88
52000204 | นายฤกษ์ ธรรมชาติ|นางรัศมี สุขฤดี|3010|75

รูปที่ 1.1 ตัวอย่างแฟ้มข้อมูลนักศึกษาที่เรียนวิชาการตลาดประจําภาคการศึกษา

ลบตนักศึกษาที่เรียนวิง:      เป็นศึกไว้เป็นแฟ้มซักนลที่มีจําบวนฟิอต์

จากรูป ข้อมูลนักศึกษาที่เรียนวิชาการตลาดประจําภาคการศึกษาถูกบันทึกไว้เป็นแฟ้มข้อมูลที่มีจํานวนฟิลด์ทั้งหมดห้าฟิลด์ และจํานวนระเบียนทั้งหมดหกระเบียน ในการนําเสนอแฟ้มข้อมูลด้วยตาราง (table wie tabular) ฟิลด์จะถูกแสดงด้วยสดมภ์ (column) ของตาราง ส่วนระเบียนถูกแสดงในรูปแบบของแถว (row)

### 1.1.2. ข้อดีข้อเสียของระบบประมวลผลแฟ้มข้อมูลคอมพิวเตอร์

โดยทั่วไป การประมวลผลแฟ้มข้อมูลคอมพิวเตอร์จะถูกใช้กับข้อมูลที่มีปริมาณน้อยหรือมีการประมวลผลแบบลําดับ (sequential processing) เช่น แฟ้มข้อความ (text file) ซึ่งมีขนาดเล็กที่เก็บข้อมูลโครงแบบ (configuration) สําหรับจัดเตรียมการทํางานของระบบปฏิบัติการคอมพิวเตอร์หรือโปรแกรมประยุกต์ต่างๆ แฟ้มข้อมูลประเภทสื่อประสม (multimedia file) ซึ่งอาจมีขนาดใหญ่แต่ประมวลผลแบบลําดับ เช่น  การแสดงเนื้อความในแฟ้มข้อมูลรูปภาพ แฟ้มข้อมูลเสียง หรือแฟ้มข้อมูลวีดีทัศน์ แต่การประมวลผลแฟ้มข้อมูลคอมพิวเตอร์ไม่เหมาะที่จะใช้ในการจัดดําเนินการข้อมูลปริมาณมากที่มีความขับซ้อนในการเข้าถึงและถูกประมวลผลแบบสุ่มรวมทั้งมีผู้ใช้งานหลายคนเพราะอาจก่อให้เกิดปัญหาหลายประการดังต่อไปนี้

### 1.1.2.1. ความซ้ำซ้อนของข้อมูล (Data Redundancy)

ในระบบประมวลผลแฟ้มข้อมูลคอมพิวเตอร์ ผู้ใช้หลายคนที่ต้องการใช้ข้อมูลร่วมกัน จะสร้างสําเนาของ
แฟ้มข้อมูลที่ต้องการเพื่อเก็บไว้ใช้ในเครื่องคอมพิวเตอร์ของตนเอง   ผลที่เกิดขึ้นเมื่อมีสําเนาของแฟ้มข้อมูลเดียวกัน
มากกว่าหนึ่งสําเนาคือ ความซ้าซ้อนของข้อมูลระหว่างแฟ้มข้อมูล (inter-file redundancy)

นอกจากนี้ ในระบบประมวลผลแฟ้มข้อมูลคอมพิวเตอร์ ผู้ใช้ยังอาจบันทึกข้อมูลเนื้อความเดียวกันมากกว่าหนึ่ง
ครั้งในแฟ้มข้อมูลเดียวกัน  เช่น ข้อมูลในฟีลด์หมายเลขโทรศัพท์ภายในที่ถูกบันทึกซ้ากันในรูปที่  1.1 การมีข้อมูล
เดียวกันปรากฏมากกว่าหนึ่งแห่งในแฟ้มข้อมูลเดียวกัน เรียกว่า ความข้าข้อนของข้อมูลภายในแฟ้มข้อมูล (intra-file redundancy)

หากความซ้้าข้อนทั้งสองประเภทนี้มีจํานวนมาก ไม่เพียงแต่จะทําให้สิ้นเปลืองพื้นที่ของหน่วยเก็บข้อมูล แต่ยัง
ก่อให้เกิดความลําบากในการเพิ่ม, การแก้ไข และการลบข้อมูลอีกด้วยเนื่องจากการเพิ่ม, แก้ไข หรือลบข้อมูลจะต้อง
ทําหลายครั้งตามจํานวนความซ้าซ้อนของข้อมูลเช่นกันเพื่อให้ข้อมูลเดียวกันมีเนื้อความตรงกันหมด เช่น ในรูปที่ 1.1 ถ้ามีนักศึกษาลงทะเบียนเรียนวิชาการตลาดประจําภาคการศึกษา เพิ่มอีกหลายคนโดยนักศึกษาเหล่านี้มีอาจารย์ที่ปรึกษาคนเดียวกันคือ นางรัศมี สุขฤดี ก็จะเกิดความลําบากในการเพิ่มระเบียนของนักศึกษาเหล่านี้ลงในแฟ้มข้อมูล
เนื่องจากทําให้ต้องเพิ่มข้อมูลในฟีลด์หมายเลขโทรศัพท์ภายในของอาจารย์รัศมีหลายครั้งเช่นกัน และหากแฟ้มข้อมูล
ดังกล่าวมีหลายสําเนา ก็จะต้องตามไปเพิ่มระเบียนของนักศึกษาเหล่านี้ลงในทุกสําเนาด้วย หรือมิเช่นนั้นก็จะต้องทํา
สําเนาแฟ้มข้อมูลใหม่ทั้งหมด, กรณีที่ต้องการแก้ไขข้อมูล เช่น ถ้าอาจารย์ รัศมี สุขฤดี เปลี่ยนหมายเลขโทรศัพท์
ภายในของตนจาก 3010 เป็น 3011 ก็จะต้องทําการแก้ไขในหลายระเบียนของแฟ้มข้อมูลและต้องแก้ทุกสําเนาของ
แฟ้มข้อมูลนี้ และกรณีสุดท้ายคือการลบข้อมูล ถ้าอาจารย์รัศมี สุขฤดี ลาออก โดยยังไม่มีการกําหนดอาจารย์ที่ปรึกษา
คนใหม่ให้ดูแลนักศึกษาของอาจารย์รัศมี ก็จะต้องลบข้อมูลไม่เพียงชื่ออาจารย์ สุขฤดี แต่รวมถึงหมายเลขโทรศัพท์
ภายในของอาจารย์หลายระเบียนในแฟ้มข้อมูลและทุกสําเนาของแฟ้มข้อมูลนี้เช่นกัน ในความเป็นจริง ปัญหาเหล่านี้
จะยุ่งยากมากขึ้นถ้ามีจํานวนระเบียนในแฟ้มข้อมูลมากกว่านี้

ความซ้ำซ้อนของข้อมูลในระบบประมวลผลแฟ้มข้อมูลคอมพิวเตอร์ นอกจากสร้างความลําบากในการเพิ่ม, การแก้ไข และการลบข้อมูลแล้ว ยังอาจนําไปสู่ปัญหาอื่นที่สําคัญต่อการจัดดําเนินการข้อมูล นั่นคือ ความไม่ต้องกัน
ของข้อมูล ดังอธิบายในหัวข้อถัดไป

#### 1.1.2.2. ความไม่ต้องกันของข้อมูล (Data Inconsistency)

ความไม่ต้องกันของข้อมูล หมายถึง ความขัดแย้งกันของข้อมูลอันเป็นผลมาจากความผิดพลาดระหว่างการเพิ่ม
การแก้ไข หรือการลบข้อมูลที่มีความขําซ้อนระหว่างแฟ้มข้อมูลหรือภายในแฟ้มข้อมูล จนทําให้ข้อมูลเดียวกันมี
เนื้อความไม่สอดคล้องกัน กล่าวคือ

ในสถานการณ์ที่ระบบประมวลผลแฟ้มข้อมูลคอมพิวเตอร์มีความซําข้อนของข้อมูลระหว่างแฟ้มข้อมูล หากมีผู้ใช้บางคนทําการเพิ่ม, แก้ไข หรือลบข้อมูลในสําเนาแฟ้มข้อมูลของตนซึ่งทําให้เนื้อความของข้อมูลแตกต่างไปจากในสําเนาแฟ้มข้อมูลของคนอื่น จะทําให้เกิดความไม่ต้องกันของข้อมูล เช่น ถ้าแฟ้มข้อมูลนักศึกษาที่เรียนวิชาการตลาดประจําภาคการศึกษาในรูป 1.1 ถูกสําเนาโดยผู้ใช้ในฝ่ายงานทะเบียนหนึ่งสําเนาและโดยอาจารย์ผู้สอนประจําวิชาการตลาดอีกหนึ่งสําเนา ต่อมามีการเปลี่ยนหมายเลขโทรศัพท์ภายในของอาจารย์รัศมี หรือหากอาจารย์รัศมีลาออก การเปลี่ยนแปลงเหล่านี้ต้องถูกประสานระหว่างฝ่ายงานทะเบียนและอาจารย์ผู้สอนประจําวิชาการตลาดเพื่อบันทึกการเปลี่ยนแปลงดังกล่าวให้สอดคล้องกัน มิเช่นนั้น จะทําให้เกิดปัญหาว่าข้อมูลในสําเนาแฟ้มข้อมูลของใครเป็นข้อมูลที่ถูกต้อง

ส่วนในสถานการณ์ที่ระบบประมวลผลแฟ้มข้อมูลคอมพิวเตอร์มีความขั้าข้อนของข้อมูลภายในแฟ้มข้อมูล เช่น กรณีที่ผู้ใช้จําเป็นต้องเพิ่มข้อมูลเหมือนกันหลาย ๆ ครั้ง ดังเช่นในกรณีที่นักศึกษากลุ่มใหม่ที่มีอาจารย์รัศมี สุขฤดี เป็นที่ปรึกษาคนเดียวกันลงทะเบียนเรียนเพิ่มในวิชาการตลาด ก็จําเป็นต้องเพิ่มหมายเลขโทรศัพท์ของอาจารย์รัศมี สุขฤดี ในหลายระเบียนของแฟ้มข้อมูลดังกล่าว, กรณีที่ผู้ใช้ต้องทําการแก้ไขข้อมูลในหลายระเบียน ดังเช่นกรณีการแก้ไข ข้อมูลหมายเลขโทรศัพท์ใหม่ของอาจารย์ที่ปรึกษา รศม สุขฤด หรอกรณทต้องลบข้อมูลของอาจารย วัศม สุขฤด ที่ลาออกไป ออกจากหลายระเบียนในแฟ้มข้อมูล การเปลี่ยนแปลงข้อมูลขั้าๆ ในสามกรณีนี้ทําให้มีโอกาสเกิดความขัดแย้งกันเองของข้อมูลขึ้นได้ถ้าผู้ใช้มีการพิมพ์ข้อมูลผิด เช่น พิมพ์หมายเลขโทรศัพท์ของอาจารย์ รัศมี ผิดในบางระเบียนที่ถูกเพิ่มเข้าไปใหม่, แก้ไขหมายเลขโทรศัพท์ใหม่ของอาจารย์รัศมี ไม่ครบทุกระเบียน หรือลบข้อมูลของอาจารย์รัศมี ออกจากแฟ้มข้อมูลไม่หมดทุกระเบียน

ปัญหาเหล่านี้ เรียกว่า ความไม่ต้องกันของข้อมูล ซึ่งมีความข้้าซ้อนของข้อมูลเป็นเหตุปัจจัยหนึ่งนั่นเอง

# การทำให้เป็นบรรทัดฐาน

ในขั้นตอนการออกแบบฐานข้อมูลเชิงสัมพันธ์ หลังจากการแปลงแบบจำลองอีอาร์เป็นเค้าร่างเชิงแนวคิดผู้ออกแบบควรนำเค้าร่างเชิงแนวคิดที่ได้ ไปผ่านการทำให้เหมาะที่สุด (optimization) ก่อนนำไปสร้างเป็นฐานข้อมูลจริง กระบวนการทำเค้าร่างเชิงแนวคิดให้เหมาะที่สุดเรียกว่า การทำให้เป็นบรรทัดฐาน หรือ นอร์มัลไลเซชัน
(normalization) ซึ่งมีวัตถุประสงค์หลักดังต่อไปนี้

- เพื่อลดความซับซ้อนของการนำเสนอตารางความสัมพันธ์ (simplify relation representation) และความชับซ้อนของคำสั่งงานฐานข้อมูลเควรี่ที่ใช้ในการค้นคืนข้อมูลจากฐานข้อมูล
- เพื่อลดความซ้ำซ้อนของข้อมูล เป็นการเพิ่มประสิทธิภาพในการเพิ่ม, การลบ และการปรับข้อมูลในฐานข้อมูลส่งผลให้ความไม่ต้องกันของข้อมูลลดลง
- เพื่อป้องกันการสูญหายของสารสนเทศและ ความผิดปกติของการปรับข้อมูล (update anomalies) ซึ่งจำแนกได้เป็นสามแบบคือ ความผิดปกติของการเพิ่มข้อมูล, ความผิดปกติของการลบข้อมูล และความผิดปกติของการเปลี่ยนแปลงข้อมูล รายละเอียดจะอธิบายในหัวข้อย่อยแรก


การทำให้เป็นบรรทัดฐานเป็นกระบวนการวิเคราะห์ภาวะการพึ่งพิงซึ่งกันและกันของลักษณะประจำ (atribute
interdependency) ในแต่ละตารางความสัมพันธ์โดยทดสอบเปรียบเทียบกับเกณฑ์แห่งการเป็นรูปแบบบรรทัดฐาน
(normal form citeria) ซึ่งที่ใช้งานกันทั่วไปมีทั้งหมดหกระดับหรือหกรูปแบบบรรทัดฐาน ได้แก่ รูปแบบบรรทัดฐาน
ที่หนึ่ง, รูปแบบบรรทัดฐานที่สอง, รูปแบบบรรชัดฐานที่สาม, รูปแบบบรรทัดฐานบีซีเอ็นเอฟ, รูปแบบบรรทัดฐานที่สี่
และรูปแบบบรรทัดฐานที่ห้า ดังจะอธิบายรายละเอียดในหัวข้อย่อยแรก

เกณฑ์แห่งการเป็นรูปแบบบรรทัดฐานแต่ละระดับมีวัตถุประสงค์เพื่อแก้ปัญหาอันเกิดจากภาวะการพึ่งพิงซึ่งกัน
และกันที่ไม่เหมาะสมของลักษณะประจำในตารางความสัมพันธ์โดยปกติ เมื่อผลการวิเคราะห์บ่งชี้ว่าตาราง
ความสัมพันธ์ใดยังไม่ผ่านเกณฑ์แห่งการเป็นรูปแบบบรรทัดฐานในระดับที่กำลังพิจารณา ตารางความสัมพันธ์นั้นจะถูก
แตกออก (Decomposed) เป็นชุดตารางความสัมพันธ์ย่อยที่อยู่ในรูปแบบบรรทัดฐานที่กำลังพิจารณา ตาราง
ความสัมพันธ์ที่ผ่านเกณฑ์แห่งการเป็นรูปแบบบรรทัดฐานระดับหนึ่งๆ จะถูกนำไปทดสอบเปรียบเทียบกับเกณฑ์แห่ง
การเป็นรูปแบบบรรทัดฐานในระดับที่สูงขึ้นไปตามลำดับ ผู้ออกแบบจะต้องดำเนินกระบวนการเช่นนี้กับทุกตาราง
ความสัมพันธ์ในเค้าร่างเชิงแนวคิดเพื่อให้ได้เค้าร่างที่มีคุณภาพในระดับที่ต้องการ

เนื้อหาของบทนี้จะชี้ให้เห็นถึงความสำคัญของปัญหาต่างๆ  ที่ได้กล่าวไว้ข้างตันซึ่งมักมีอยู่ในเค้าร่างเชิงแนวคิดที่
แปลงจากแบบจำลองอีอาร์ พร้อมทั้งอธิบายถึงวิธีลดหรือกำจัดปัญหาด้วยกระบวนการทำให้เป็นบรรทัดฐาน ซึ่งทั้งหก
ระดับมีประโยชน์และเกณฑ์แห่งการเป็นรูปแบบบรรทัดฐานดังต่อไปนี้

## 5.1. รูปแบบบรรทัดฐานที่หนึ่ง (First Normal Form; 1NF)

### 5.1.1. ความสำคัญ

พิจารณารูปที่ 5.1 ซึ่งแสดงตัวอย่างแบบจำลองอีอาร์ของฐานข้อมูลบทความวิชาการและตารางนำเสนอข้อมูล
ของฐานข้อมูลดังกล่าวสองแบบ ลักษณะประจำแบบหลายค่ในแบบจำลองบ่งบอกว่าแต่ละบทความสามารถมีผู้เขียน
มากกว่าหนึ่งคน ซึ่งในความเป็นจริง บทความวิชาการต้องมีผู้เขียนหลักหนึ่งคนและอาจมีผู้เขียนร่วมหนึ่งคนหรือ
มากกว่า

![](/img/5-1.png)

รูปที่ 5.1 ตัวอย่างแบบจำลองและตารางการนำเสนอและจัดเก็บข้อมูลที่ไม่ใช่รูปแบบบรรทัดฐาน


ตัวอย่างตารางที่หนึ่งในรูปนำเสนอและจัดเก็บข้อมูลเกี่ยวกับผู้เขียนแต่ละคนแยกเป็นสดมภ์ใหม่ คือ รหัสผู้เขียน
ที่, ชื่อผู้เขียนที่ และที่อยู่ผู้เขียนที่ ดังนั้นถ้าต้องการบันทึกบทความที่มีผู้เขียนหลายคนจะต้องทำการปรับโครงสร้าง
ของตารางใหม่เพื่อเพิ่มอีกสามสดมภ์ต่อผู้เขียนหนึ่งคน และถ้ามีบทความหนึ่งมีผู้เขียนทั้งหมดห้าคน แต่บทความที่
เหลือมีอย่างมากสองคน จะทำให้ในทุกแถวของบทความที่เหลือนั้นมีสดมภ์ของผู้เขียนคนที่สามถึงห้าเป็นค่าว่าง หรือ
กรณีบทความที่มีผู้เขียนห้าคนถูกลบ ก็ควรต้องทำการปรับโครงสร้างของตารางอีกครั้งเพื่อลดภาระในการดูแลสดมภ์ที่
ไม่มีการใช้งาน จะเห็นว่าการนำเสนอข้อมูลและจัดเก็บข้อมูลที่มีการเกิดซ้ำของสดมภ์หรือลักษณะประจำดังตารางที่
หนึ่งนี้ มีความซับซ้อนในแง่ของการปรับโครงสร้างตารางและขาดประสิทธิภาพในแง่ของการใช้พื้นที่ของตาราง
นอกจากนี้ยังทำให้การค้นคืนข้อมูลด้วยคำสั่งงานฐานข้อมูลเป็นไปโดยยาก เช่น จากรูปที่ 5.1 บน เมื่อต้องการค้นคืน
ข้อมูลรหัสบทความทั้งหมดที่มีรหัสผู้เขียนตามที่ระบุ จะต้องใช้คำสั่งงานเควรี่ที่มีเงื่อนไขตรวจสอบค่าของรหัสผู้เขียน
ทุกสดมภ์เพื่อเปรียบเทียบกับค่ารหัสผู้เขียนที่ระบุในคำสั่งงาน
ตัวอย่างตารางที่สองในรูป  เปลี่ยนโครงสร้างของตารางที่หนึ่งในส่วนที่เกี่ยวกับผู้เขียนแบบแยกสดมภ์เป็นแบบ
รวมสดมภ์และเพิ่มจำนวนระเบียนแทน จะเห็นว่ายังคงมีกลุ่มลักษณะประจำที่เกิดซ้ำกล่าวคือค่าของดรรชนีรหัส
บทความหนึ่งค่ายังให้ค่าของรหัสผู้เขียน, ชื่อผู้เขียน และที่อยู่ผู้เขียน หลายค่า โครงสร้างตารางแบบอย่างนี้แม้จะช่วย
ให้การค้นคืนข้อมูลรหัสบทความของผู้เขียนที่มีรหัสตามที่ระบุกระทำได้ด้วยคำสั่งงานเควรี่ที่ง่ายขึ้นเพราะใช้เงื่อนไขที่
ตรวจสอบกับรหัสผู้เขียนเพียงสดมภ์เดียว แต่มีข้อเสียคือ รหัสบทความไม่สามารถใช้เป็นดรรชนีในการระบุแยกแยะ
รหัสผู้เขียน, ชื่อผู้เขียน และที่อยู่ผู้เขียนได้อีกต่อไปเนื่องจากค่าของรหัสบทความหนึ่งค่าให้ค่ารหัสผู้เขียนหลายค่า เป็น
ต้น ทำให้ระบบจัดการฐานข้อมูลเชิงสัมพันธ์ไม่สามารถจัดดำเนินการข้อมูลในตารางนี้ได้
วิธีแก้ปัญหาทั้งหมดที่อธิบายมานี้คือต้องทำให้ตารางอยู่ในรูปแบบบรรทัดฐานที่หนึ่งด้วยการทดสอบกับเกณฑ์
ดังต่อไปนี้

### 5.1.2. หลักการแห่งรูปแบบบรรทัดฐานที่หนึ่ง

> เกณฑ์แห่งการเป็นรูปแบบบรรทัดฐานที่หนึ่ง ตารางความสัมพันธ์ใดจะอยู่ในรูปแบบบรรทัดฐานที่หนึ่งก็ต่อเมื่อตารางความสัมพันธ์นั้นไม่มีกลุ่มลักษณะประจำที่เกิดซ้ำ (no repeating groups)

### 5.1.3. การนำไปใช้แก้ปัญหา
เมื่อพิจารณาตามเกณฑ์นี้ ตารางทั้งสองในรูปที่ 5.1 ซึ่งมีการเกิดซ้ำของกลุ่มลักษณะประจำคือ รหัสผู้เขียน, ชื่อ
ผู้เขียน และที่อยู่ผู้เขียน จึงเป็นรูปแบบที่ยังไม่ผ่านการทำให้บรรทัดฐานระดับที่หนึ่ง (unnormalized form: UNF)
ในทางปฏิบัติ ฐานข้อมูลเชิงสัมพันธ์ไม่อนุญาตให้มีตารางประเภทนี้อยู่ในฐานข้อมูล จึงมิอาจเรียกตารางทั้งสองนี้ว่า
ตารางความสัมพันธ์ การทำให้ตารางทั้งคู่เป็นตารางความสัมพันธ์ในรูปแบบบรรทัดฐานที่หนึ่งสามารถทำได้
โดยกำจัดการเกิดซ้ำของกลุ่มลักษณะประจำดังเช่นรูปที่ 5.2 ซึ่งเป็นการปรับโครงสร้างตารางแรกในรูปที่ 5.1 ให้
เหมือนตารางที่สองและกำหนดกุญแจหลักของตารางที่สองเป็นลักษณะประจำแบบประกอบที่ประกอบด้วยลักษณะ
ประจำรหัสบทความและรหัสผู้เขียนทำให้สามารถระบุแยกแยะได้ทุกฟิลด์ในตารางความสัมพันธ์

บทความวิชาการ

รหัสบทความ | ชื่อสถาบัน | ที่อยู่สถาบัน | รหัสบรรณาธิการ | รหัสวารสาร | รหัสผู้เขียน | ชื่อผู้เขียน | ที่อยู่ผู้เขียน |
| ------- | ------- | -------- | ----------- | --------- | -------- | -------- | ------ |
4216 | NII | Japan | 100 | 14 | 7613 | T.B. | Japan
5789 | AIT | Thailand | 106 | 53 | 1126 | E.N. |Thailand
5789 | AIT | Thailand | 106 | 53 | 7384 | N.K | U.S.A.
6021 | NECTEC | Thailand | 107 | 60 | 7613 | T.B. | Japan
6274 | MIT | U.S.A. | 112 | 78 | 2057 | A.E.|  U.S.A.

รูปที่ 5.2 ตัวอย่างตารางความสัมพันธ์ที่เป็นรูปแบบบรรทัดฐานที่หนึ่ง

## 5.2. รูปแบบบรรทัดฐานที่สอง (Second Normal Form; 2NF)
### 5.2.1. ความสำคัญ
อย่างไรก็ตาม แม้ตารางความสัมพันธ์ในรูปที่ 5.2 จะเป็นรูปแบบบรรทัดฐานที่หนึ่ง แต่ก็ยังมีปัญหาบางประการ
กล่าวคือ การเพิ่มระเบียนของบทความเดียวกันเพื่อเพิ่มผู้เขียนคนที่สองดังเช่นในแถวที่สามของตาราง ทำให้ค่าของ
ฟิลต์รหัสบทความ, ชื่อสถาบัน, ที่อยู่สถาบัน, รหัสบรรณาธิการ และรหัสวารสาร ต้องถูกบันทึกช้ำซ้อน ถ้าข้อมูลที่ถูก
บันทึกช้ำมีความผิดพลาดจะก่อให้เกิดปัญหาความไม่ต้องกันของข้อมูลได้ เช่นในระเบียนที่สาม ถ้าใส่รหัสบรรณาธิการ
ผิดเป็น 107 แทนที่จะเป็น 106 จะสร้างความสับสนว่าใครเป็นบรรณาธิการของบทความที่มีรหัส 5789 นอกจากนี้
ตารางความสัมพันธ์รูปที่ 5.2 ยังไม่รองรับการเพิ่มข้อมูลเกี่ยวกับผู้เขียนคนใหม่หากผู้เขียนยังไม่เคยส่งบทความเข้ามา
เพราะการเพิ่มระเบียนสำหรับผู้เขียนคนใหม่ที่ไม่เคยส่งบทความมาจะทำให้ค่าของฟีลด์รหัสบทความเป็นค่าว่างซึ่งเป็น
ค่าต้องห้ามสำหรับฟิลด์ที่เป็นส่วนประกอบของกุญแจหลักของตารางความสัมพันธ์ ข้อเสียทั้งสองแบบนี้เรียกรวมกันว่า
เป็นปัญหา ความผิดปกติของการเพิ่มข้อมูล (insertion anomaly) และถ้ามีผู้เขียนบางคนร่วมเขียนหลาย
บทความ เมื่อมีการแก้ไขที่อยู่ของผู้เขียนคนนั้นก็ต้องตามแก้หลายระเบียน ปัญหานี้เรียกว่า ความผิดปกติของการ
เปลี่ยนแปลงข้อมูล (modification anomaly)

นอกจากนี้เมื่อใดก็ตามที่มีการเพิกถอนบทความรหัส 6274 ซึ่งทำให้ต้องลบระเบียนสุดท้ายในรูป 5.2 ออกจาก
ตารางความสัมพันธ์ทั้งหมด ส่งผลให้ข้อมูลเกี่ยวกับผู้เขียนรหัส 2057 สูญหายไปจากตารางความสัมพันธ์ด้วย ปัญหานี้
เรียกว่า ความผิดปกติของการลบข้อมูล (deletion anomaly)

สาเหตุของความผิดปกติทั้งสองแบบอย่างนี้เกิดจากการที่ชื่อผู้เขียนและที่อยู่ผู้เขียนสามารถถูกระบุแยกแยะได้
ด้วยรหัสผู้เขียนเพียงลำพังโดยมิต้องอาศัยรหัสบทความ แต่กระนั้นยังถูกบันทึกรวมไว้ในตารางความสัมพันธ์เดียวกัน
กับรหัสบทความ ดังนั้นหากแยกเก็บฟิลด์รหัสผู้เขียน, ชื่อผู้เขียน และที่อยู่ผู้เขียน ไว้อีกหนึ่งตารางความสัมพันธ์โดย
คงเหลือฟิลด์รหัสผู้เขียนไว้ในตารางเดิมจะช่วยป้องกันความผิดปกติเหล่านี้ได้ วิธีการแก้ปัญหานี้คือการปรับตาราง
ความสัมพันธ์รูปแบบบรรทัดฐานที่หนึ่งให้เป็นรูปแบบบรรทัดฐานที่สอง

### 5.2.2. หลักการแห่งรูปแบบบรรทัดฐานที่สอง
การทำความเข้าใจกับเกณฑ์แห่งการเป็นรูปแบบบรรขัดฐานที่สองต้องทราบความหมายของคุณสมบัติ การ
พึ่งพิงเชิงหน้าที่ (functional dependency: FD) ซึ่งถูกนิยามดังนี้ สำหรับตารางความสัมพันธ์ใดๆ เซตลักษณะ
ประจำ B พึ่งพิงเชิงหน้าที่กับเซตลักษณะประจำ A ก็ต่อเมื่อค่าของลักษณะประจำทั้งหมดในเซต A หนึ่งค่าถูกสัมพันธ์
กับค่าของลักษณะประจำที่เป็นสมาชิกของเซต B เพียงหนึ่งค่าเสมอ ถูกแสดงด้วย A - B อ่านว่า มีการพึ่งพิงเชิง
หน้าที่จาก A ไป B หรือ B พึ่งพิงเชิงหน้าที่กับ A และเรียกทั้งเซต A ว่า ตัวกำหนด (determinant) และแต่ละสมาชิก
ในเชต b ว่า ตัวถูกกำหนด (nondeterminant)

กล่าวอีกนัยหนึ่ง ตัวกำหนดสามารถระบุแยกแยะตัวถูกกำหนดได้

พิจารณาตัวอย่างตารางความสัมพันธ์ บทความวิชาการ(รหัสบทความ, ชื่อสถาบัน, ที่อยู่สถาบัน, รหัส
บรรณาธิการ, รหัสวารสาร, หัสผู้เขียน, ชื่อผู้เขียน, ที่อยู่ผู้เขียน) จากรูปที่ 5.2 พบว่ามีการพึ่งพิงเชิงหน้าที่ดังนี้

- FD1: รหัสบทความ, รหัสผู้เขียน > ชื่อสถาบัน
- FD2: รหัสบทความ, รหัสผู้เขียน > ที่อยู่สถาบัน
- FD3: รหัสบทความ, รหัสผู้เขียน > รหัสบรรณาธิการ
- FD4: รหัสบทความ, รหัสผู้เขียน > รหัสวารสาร
- FD5: รหัสบทความ, รหัสผู้เขียน > ชื่อผู้เขียน
- FD6: รหัสบทความ, รหัสผู้เขียน > ที่อยู่ผู้เขียน
- FD7: หัสบทความ - รหัสบรรณาธิการ
- FD8: หัสบทความ > รหัสวารสาร
- FD9: รหัสผู้เขียน > ชื่อผู้เขียน
- FD10: รหัสผู้เขียน > ที่อยู่ผู้เขียน
- FD11: ชื่อสถาบัน > ที่อยู่สถาบัน


การพึ่งพิงเชิงหน้าที่เหล่านี้สามารถเขียนอย่างย่อได้โดยรวมการพึ่งพิงเชิงหน้าที่ที่มีตัวกำหนดเหมือนกันเข้า
ด้วยกันดังนี้
- รหัสบทความ, รหัสผู้เขียน > ชื่อสถาบัน, ที่อยู่สถาบัน, รหัสบรรณาธิการ, รหัสวารสาร, ชื่อผู้เขียน, ที่อยู่ผู้เขียน
- รหัสบทความ > รหัสบรรณาธิการ, รหัสวารสาร
- รหัสผู้เขียน > ชื่อผู้เขียน, ที่อยู่ผู้เขียน
- ชื่อสถาบัน > ที่อยู่สถาบัน


หมายเหตุ ในการวิเคราะห์การพึ่งพิงเชิงหน้าที่ ถ้าตัวกำหนดเป็นซูเปอร์คีย์จะเลือกวิเคราะห์เฉพาะการพึ่งพิงเชิง
หน้าที่ที่ซูเปอร์คีย์ที่มีจำนวนสมาชิกน้อยที่สุดเท่านั้นซึ่งก็คือกุญแจให้เลือก
เพื่อความชัดเจนในการอธิบาย จะขอพิจารณาการเขียนในแบบไม่อ FD3 และ FD7 แทน ซึ่งจะเห็นว่าความ
จริง FD7 บ่งบอกว่า รหัสบรรณาธิการพึ่งพิงเชิงหน้าที่กับรหัสบทความเท่านั้น ไม่จำเป็นต้องใช้รหัสผู้เขียนช่วยในการ
ระบุแยกแยะรหัสบรรณาธิการ เรียกการพึ่งพิงเชิงหน้าที่แบบ FD3 ว่า การพึ่งพิงเชิงหน้าที่บางส่วน (partially
functional dependency) และเรียกการพึ่งพิงเชิงหน้าที่แบบ FD7 ว่า การพึ่งพิงเชิงหน้าที่เต็มรูปแบบ (fully
functional dependency) ในทำนองเดียวกัน FD8 เป็นการพึ่งพิงเชิงหน้าที่เต็มรูปแบบ ส่วน FD4 เป็นการพึ่งพิง
เชิงหน้าที่บางส่วน, FD9 เป็นการพึ่งพิงเชิงหน้าที่เต็มรูปแบบ  ส่วน FD5 จึงเป็นการพึ่งพิงเชิงหน้าที่บางส่วน และ
FD10 เป็นการพึ่งพิงเชิงหน้าที่เต็มรูปแบบ ส่วน FD6 จึงเป็นการพึ่งพิงเชิงหน้าที่บางส่วน ส่วน FD1, FD2 และ FD11
ต่างก็เป็นการพึ่งพิงเชิงหน้าที่เต็มรูปแบบ

> เกณฑ์แห่งการเป็นรูปแบบบรรทัดฐานที่สอง ตารางความสัมพันธ์ใดจะอยู่ในรูปแบบบรรทัดฐานที่สองก็ต่อเมื่อลักษณะประจำสามัญทุกตัว(ถ้ามี)พึ่งพิงเชิงหน้าที่เต็มรูปแบบกับกุญแจหลัก

### 5.2.3. การนำไปใช้แก้ปัญหา
เมื่อนำเกณฑ์นี้ไปทดสอบตารางความสัมพันธ์ บทความวิชาการ(รหัสบทความ, ชื่อสถาบัน, ที่อยู่สถาบัน, รหัส
บรรณาธิการ, รหัสวารสาร, รหัสผู้เขียน, ชื่อผู้เขียน, ที่อยู่ผู้เขียน) ซึ่งเป็นรูปแบบบรรทัดฐานที่หนึ่ง โดยอาศัยการ
วิเคราะห์การพึ่งพิงเชิงหน้าที่ข้างต้น พบว่าตารางความสัมพันธ์ดังกล่าวนี้ยังไม่เป็นรูปแบบบรรทัดฐานที่สอง เนื่องจาก
FD3, FD4, FD5 และ FD6 เป็นการพึ่งพิงเชิงหน้าที่บางส่วนจากกุญแจหลักไปยังลักษณะประจำสามัญ
การทำให้ตารางความสัมพันธ์นี้เป็นรูปแบบบรรทัดฐานที่สองจะใช้การแตก (decomposition) ตารางออกเป็น
ตารางความสัมพันธ์ย่อยในลักษณะที่สามารถกำจัดการพึ่งพิงเชิงหน้าที่บางส่วนได้หมด ดังนั้นควรแตกออกเป็นสาม
ตารางความสัมพันธ์ดังนี้

- R1(รหัสบทความ, รหัสผู้เขียน, ชื่อสถาบัน, ที่อยู่สถาบัน)
- R2(รหัสบทความ, รหัสบรรณาธิการ, รหัสวารสาร)
- R3(รหัสผู้เขียน, ชื่อผู้เขียน, ที่อยู่ผู้เขียน)


เมื่อวิเคราะหการพึ่งพิงเชิงหน้าที่ของแต่ละตารางความสัมพันธ์ย่อยเหล่านี้พบว่า ตารางความสัมพันธ์ R1 มีเพียง
สองการพึ่งพิงเชิงหน้าที่คือ รหัสบทความ, รหัสผู้เขียน > ชื่อสถาบัน และ รหัสบทความ, รหัสผู้เขียน > ที่อยู่
สถาบัน ซึ่งล้วนเป็นการพึ่งพิงเชิงหน้าที่เต็มรูปแบบ ดังนั้น R2 จึงเป็นรูปแบบบรรทัดฐานที่สองแล้ว
ตารางความสัมพันธ์ R2 มีเพียงสองการพึ่งพิงเชิงหน้าที่คือ รหัสบทความ > รหัสบรรณาธิการ และ รหัส
บทความ > รหัสวารสาร ซึ่งล้วนเป็นการพึ่งพิงเชิงหน้าที่เต็มรูปแบบ ดังนั้น R2 จึงเป็นรูปแบบบรรทัดฐานที่สองด้วย
ตารางความสัมพันธ์ R3 มีเพียงสองการพึ่งพิงเชิงหน้าที่คือ รหัสผู้เขียน > ชื่อผู้เขียน และ รหัสผู้เขียน → ที่อยู่
ผู้เขียน ซึ่งล้วนเป็นการพึ่งพิงเชิงหน้าที่เต็มรูปแบบ ดังนั้น R3 จึงเป็นรูปแบบบรรทัดฐานที่สองเช่นกัน
ตารางความสัมพันธ์ทั้งสามมีตัวอย่างข้อมูลดังรูปที่ 5.3 โดยอ้างอิงตัวอย่างข้อมูลจากรูปที่ 5.2

R1

 <u>รหัสบทความ</u>| <u>รหัสผู้เขียน</u> | ชื่อสถาบัน | ที่อยู่สถาบัน | 
| ------- | -------- | ------- | -------- | 
4216      | 7613     | NII     | Japan    | 
5789      | 1126     | AIT     | Thailand | 
5789      | 7384     | AIT     | Thailand | 
6021      | 7613     | NECTEC  | Thailand | 
6274      | 2057     | MIT     | U.S.A.   | 

R2
 <u>รหัสบทความ</u>| รหัสบรรณาธิการ | รหัสวารสาร |
| ------- | ------------ | --------- |
4216      | 100          | 14        |
5789      | 106          | 53        |
5789      | 106          | 53        |
6021      | 107          | 60        |
6274      | 112          | 78        |

R3

| <u>รหัสผู้เขียน</u> | ชื่อผู้เขียน | ที่อยู่ผู้เขียน |
| -------- | -------- | ------ |
| 7613     | T.B.     | Japan
| 1126     | E.N.     | Thailand
| 7384     | N.K      | U.S.A.
| 7613     | T.B.     | Japan
| 2057     | A.E.     |  U.S.A.



รูปที่ 5.3 (R1, R2, R3) ตัวอย่างข้อมูลของตารางความสัมพันธ์ที่เป็นรูปแบบบรรหัดฐานที่สอง 

จะเห็นว่หลังจากที่ตารางความสัมพันธ์บทความวิชาการถูกปรับเป็นรูปแบบบรรหัดฐานที่สอง ปัญหาความ
ผิดปกติของการเพิ่มข้อมูลลดลงเนื่องจากสามารถพิ่มผู้เขียนคนที่สองของบทความรหัส 5789 (ด้วยการเพิ่มระเบียนที่
สามของตารางความสัมพันธ์ R1) ได้โดยไม่ต้องบันทึกข้อมูลรหัสบรรณาธิการ 106 และรหัสวารสาร 53 ซ้ำซ้อนเพราะ
ถูกเก็บแยกอยู่ในตารางความสัมพันธ์ R2 (หมายเหตุ ปัญหานี้จะลดลงกว่านี้หลังปรับเป็นรูปแบบบรรทัดฐานที่สูงขึ้น)
นอกจากนี้ ยังสามารถเพิ่มข้อมูลเกี่ยวกับผู้เขียนคนใหม่ไว้ในฐานข้อมูลที่ตารางความสัมพันธ์ R3 ได้แม้ผู้เขียนยังไม่เคย
ส่งบทความเข้ามา ปัญหาความผิดปกติในการเปลี่ยนแปลงข้อมูลที่อยู่ผู้เขียนก็หมดไปเพราะสามารถเปลี่ยนแปลงได้
เพียงหนึ่งระเบียนสำหรับผู้เขียนแต่ละคนโดยแก้ในตารางความสัมพันธ์ R3

นอกจากนี้ ความผิดปกติของการลบข้อมูลก็หมดไปเช่นกันเนื่องจากสามารถทำการเพิกถอนบทความรหัส 6274
โดยลบระเบียนสุดท้ายออกจากตารางความสัมพันธ์ R1 และ R2 โดยที่ข้อมูลเกี่ยวกับผู้เชียนรหัส 2057 ยังไม่สูญ
หายไปจากฐานข้อมูล เพราะอยู่ในตารางความสัมพันธ์ R3

## 5.3. รูปแบบบรรทัดฐานที่สาม (Third Normal Form; 3NF
### 5.3.1. ความสำคัญ
ตารางความสัมพันธ์ที่เป็นรูปแบบบรรทัดฐานที่สองข้างต้นยังอาจมีปัญหาความผิดปกติของการปรับข้อมูล
หลงเหลืออยู่ เช่น ในตารางความสัมพันธ์ R1 รูป 5.3 เมื่อต้องการเปลี่ยนแปลงข้อมูล ที่อยู่สถาบัน ของสถาบัน AT
จะต้องดำเนินการกับระเบียนที่สองและสาม (ซึ่งเป็นข้อมูลของบทความที่ถูกส่งมาในนามของสถาบัน AT ลอง
จิตนาการ) ถ้ามีการเปลี่ยนแปลงข้อมูลทำนองนี้บ่อยครั้ง(และในแต่ละครั้งมีจำนวนระเบียนที่ต้องปรับจำนวนมากกว่า
นี้) ทำให้มีโอกาสเกิดความไม่ต้องกันของข้อมูลหากการเปลี่ยนแปลงมีความผิดพลาดในบางครั้ง ปัญหาความผิดปกติ
ของการเพิ่มข้อมูลที่ยังคงอยู่ใน 1 คือ ถ้ามีบทความส่งเพิ่มเข้ามาในนามสถาบัน ait ที่อยู่ของสถาบันนี้จะต้องถูก
บันทึกซ้ำอีกซึ่งอาจนำไปสู่ความไม่ต้องกันของข้อมูล และปัญหาความผิดปกติของการลบข้อมูลที่ยังคงอยู่คือถ้ามีการ
ถอนบทความรหัส 4216 จะทำให้ข้อมูลเกี่ยวกับสถาบัน Nแ ว่าตั้งอยู่ในประเทศญี่ปุ่นสูญหายไปจากฐานข้อมูล
ปัญหาความผิดปกติของการปรับข้อมูลที่เหลืออยู่ในตารางความสัมพันธ์ R1  เหล่านี้มีสาเหตุมาจากที่อยู่ของ
สถาบันมีการพึ่งพิงเชิงหน้าที่กับชื่อสถาบันซึ่งไม่ใช่กุญแจหลัก การแก้ไขปัญหานี้ทำได้ด้วยการทำให้ตาราง
ความสัมพันธ์เป็นรูปแบบบรรทัดฐานที่สูงขึ้นไป คือรูปแบบบรรทัดฐานที่สาม
### 5.3.2. หลักการแห่งรูปแบบบรรทัดฐานที่สาม
หลักการสำคัญที่เป็นพื้นฐานของรูปแบบบรรทัดฐานที่สามคือ การพึ่งพิงแบบส่งผ่าน (transitive
dependency) ซึ่งหมายถึง การพึ่งพิงเชิงหน้าที่ X > Y และมี X → 2 และ 2 → Y โดย Z เป็นเซตของลักษณะ
ประจำสามัญในตารางความสัมพันธ์เดียวกันกับ X และ Y เช่น ในตารางความสัมพันธ์ R1(รหัสบทความ, รหัสผู้เขียน,
ชื่อสถาบัน, ที่อยู่สถาบัน) ข้างต้น การพึ่งพิงเชิงหน้าที่ รหัสบทความ, รหัสผู้เขียน > ที่อยู่สถาบัน เป็นการพึ่งพิงแบบ
ส่งผ่าน เพราะมี รหัสบทความ, หัสผู้เขียน > ชื่อสถาบัน และ ชื่อสถาบัน > ที่อยู่สถาบัน

> เกณฑ์แห่งการเป็นรูปแบบบรรทัดฐานที่สาม ตารางความสัมพันธ์ใดจะอยู่ในรูปแบบบรรทัดฐานที่สามก็ต่อเมื่อเป็นรูปแบบบรรทัดฐานที่สองและไม่มีลักษณะประจำสามัญที่พึ่งพิงแบบส่งผ่านกับกุญแจหลัก

กล่าวอีกนัยหนึ่ง การไม่มีลักษณะประจำสามัญที่พึ่งพิงแบบส่งผ่านกับกุญแจหลัก ก็คือ การไม่มีการพึ่งพิงเชิง
หน้าที่ระหว่างลักษณะประจำสามัญนั่นเอง จากตัวอย่างตารางความสัมพัธ์ R1(<u>รหัสบทความ</u>, <u>รหัสผู้เขียน</u>, ชื่อ
สถาบัน, ที่อยู่สถาบัน) การพึ่งพิงเชิงหน้าที่ระหว่างลักษณะประจำสามัญคือ ชื่อสถาบัน > ที่อยู่สถาบัน ทำให้มีการ
พึ่งพิงแบบส่งผ่านกับกุญแจหลัก (รหัสบทความ, รหัสผู้เขียน)

### 5.3.3. การนำไปใช้แก้ปัญหา
การทำให้ตารางความสัมพันธ์เป็นรูปแบบบรรทัดฐานที่สามจะอาศัยการแตกตารางออกเป็นตารางความสัมพันธ์
ย่อยในลักษณะที่สามารถกำจัดการพึ่งพิงแบบส่งผ่าน  ดังนั้นตารางความสัมพันธ์ R1 ควรแตกออกเป็นสองตาราง
ความสัมพันธ์ดังนี้

- R1 1(<u>รหัสบทความ</u>, รหัสผู้เขียน, ชื่อสถาบัน)
- R12(<u>ซื่อสถาบัน</u>, ที่อยู่สถาบัน)


ตารางความสัมพันธ์ทั้งสองมีตัวอย่างข้อมูลที่มาจากรูปที่ 5.3 ดังแสดงในรูปที่ 5.4

สังเกตว่าในแต่ละตารางความสัมพันธ์ ไม่มีการพึ่งพิงเชิงหน้าที่ระหว่างลักษณะประจำสามัญ นั่นหมายความว่า
ไม่มีการพึ่งพิงแบบส่งผ่าน ดังนั้นตารางความสัมพันธ์ทั้งสองจึงเป็นรูปแบบบรรทัดฐานที่สาม และปัญหาความผิดปกติ
ของการเปลี่ยนแปลงข้อมูลที่กล่าวถึงในช่วงท้ายของหัวข้อย่อยที่แล้วก็ถูกกำจัดไปจากตารางทั้งสองเช่นกันเพราะ
สามารถทำการเปลี่ยนแปลงที่อยู่ของสถาบันได้โดยการแก้ไขเพียงหนึ่งระเบียนของตาราง R12

![](/img/5-4.png)

รูปที่ 5.4 ข้อมูลของตารางความสัมพันธ์ที่เป็นรูปแบบบรรทัดฐานที่สาม
พิจารณาอีกหนึ่งตัวอย่างตารางความสัมพันธ์ สอน(<u>นักศึกษา</u>, <u>วิชา</u>, อาจารย์) ดังรูปที่ 5.5

![](/img/5-5.png)

รูปที่ 5.5 ตัวอย่างตารางความสัมพันธ์สอน

การพึ่งพิงเชิงหน้าที่ในตารางความสัมพันธ์นี้คือ

- FD1: นักศึกษา, วิชา > อาจารย์
- FD2: อาจารย์ 2 วิชา


เมื่อทำการทดสอบกับกณฑ์แห่งการเป็นรูปแบบบรรทัดฐานทั้งสาม พบว่าตารางความสัมพันธ์นี้เป็นรูปแบบ
บรรทัดฐานที่หนึ่ง, สอง และสาม

## 5.4. รูปแบบบรรทัดฐานบีซีเอ็นเอฟ (Boyce-Codd Normal Form, BCNF)
### 5.4.1. ความสำคัญ
แม้จะเป็นรูปแบบบรรทัดฐานที่สาม แต่ยังอาจมีปัญหาความผิดปกติของการลบข้อมูลแอบแฝงอยู่ เช่น ในตาราง
ความสัมพันธ์รูปที่ 5.5 ถ้านางสาวฤดี หทัย เพิกถอนการลงทะเบียนเรียนวิชาฟิสิกส์ทำให้ต้องลบระเบียนสุดท้ายออก
จากตารางความสัมพันธ์ ผลกระทบที่เกิดขึ้นคือการสูญหายของข้อมูลที่เกี่ยวข้องกับอาจารย์เจริญ มั่งมี กล่าวคือ
อาจารย์เจริญ มั่งมี สอนวิชาฟิสิกสั ปัญหานี้มีสาเหตุมาจากการที่ FD2 มีตัวกำหนด อาจารย์ซึ่งไมใช่กุญแจหลัก แต่มี
ตัวถูกกำหนด วิชา เป็นส่วนประกอบของกุญแจหลัก ปัญหานี้สามารถแก้ไขได้ด้วยการทำให้ตารางความสัมพันธ์นี้เป็น
รูปแบบบรรทัดฐานบีซีเอ็นเอฟดังมีรายละเอียดต่อไปนี้
### 5.4.2. หลักการแห่งรูปแบบบรรทัดฐานบีซีเอ็นฟ
รูปแบบบรรทัดฐานบีซีเอ็นเอฟเป็นรูปแบบบรรทัดฐานที่เข้มงวดกว่ารูปแบบบรรทัดฐานที่สาม ถูกตั้งชื่อตามนาม
ของผู้คิดค้นสองท่าน คือ Boyce และ Codd

> เกณฑ์แห่งการเป็นรูปแบบบรรทัดฐานบีชีเอ็นเอฟ ตารางความสัมพันธ์ใดจะอยู่ในรูปแบบบรรทัดฐานบีซีเอ็นเอฟก็ต่อเมื่อถ้ามีการพึ่งพิงเชิงหน้าที่แบบไม่สะท้อน (nontrivial functional dependency) ซึ่งแสดงด้วย X > A ในตารางความสัมพันธ์ แล้ว X จะต้องเป็นชูเปอร์คีย์ของตารางความสัมพันธ์
> 
> การพึ่งพิงเชิงหน้าที่แบบไม่สะท้อน X > A หมายถึง X ระบุแยกแยะ A โดยที่ A ไม่ใช่ X และไม่เป็นส่วนประกอบของ X


สามารถอธิบายเกณฑ์แห่งการเป็นรูปแบบบรรทัดฐานบีซีเอ็นเอฟในอีกนัยหนึ่งได้ว่า ตารางความสัมพันธ์ใดจะ
อยู่ในรูปแบบบรรทัดฐานบีซีเอ็นเอฟก็ต่อเมื่อทุกๆ ตัวกำหนดทั้งหมดที่เป็นไปได้จะต้องมีกุญแจให้เลือกของตาราง
ความสัมพันธ์เป็นสมาชิกอยู่ด้วย

5.4.3. การนำไปใช้แก้ปัญหา
จากตัวอย่างในรูปที่ 5.5 ตารางความสัมพันธ์ สอน(นักศึกษา, วิชา, อาจารย์) ซึ่งเป็นรูปแบบบรรทัดฐานที่สาม
ยังมิใช่รูปแบบบรรทัดฐานบีซีเอ็นเอฟ เนื่องจากการพึ่งพิงเชิงหน้าที่ FD2 มีตัวกำหนดที่ไม่ใช่เปอร์คีย์ ตาราง
ความสัมพันธ์นี้สามารถกำหนดเป็นแบบอย่าง (pattern) ได้ดังนี้

```
R(A. B, C):      A, B > C
                    C > B
```


การทำให้ตารางความสัมพันธ์ R เป็นรูปแบบบรรทัดฐานบีซีเอ็นเอฟ ให้แตกออกเป็นตารางความสัมพันธ์ย่อย
สองตาราง R1 และ R2 ซึ่งทั้งคู่เป็นรูปแบบบรรทัดฐานบีซีเอ็นเอฟ ดังนี้

```
R1(A, C):       A, C
R2(C, B):          C >B
```

เมื่อแตกตารางความสัมพันธ์สอนเป็นสองตารางความสัมพันธ์ตามแบบอย่างข้างบนจะได้ R1(<u>นักศึกษา</u>,
<u>อาจารย์</u>) และ R2(<u>อาจารย์</u>, วิชา) ซึ่งแต่ละตารางต่างก็ผ่านเกณฑ์การเป็นรูปแบบบรรทัดฐานที่หนึ่ง, รูปแบบบรรทัด
ฐานที่สอง, รูปแบบบรรทัดฐานที่สาม และรูปแบบบรรทัดฐานบีซีเอ็นเอฟ หมายเหตุ ตารางความสัมพันธ์ R1 ไม่มีการ
พึ่งพิงเชิงหน้าที่ และเมื่อพิจารณาตัวอย่างข้อมูลของตารางความสัมพันธ์ทั้งสองตังรูปที่ 5.6 พบว่าปัญหาความผิดปกติ
ของการลบข้อมูลที่กล่าวถึงในช่วงท้ายของหัวข้อย่อยที่แล้วก็ถูกกำจัดไปเช่นกันเพราะสามารถทำการลบข้อมูลที่ว่า
นางสาวฤดี หทัย เพิกถอนการลงทะเบียนเรียนวิชาฟิสิกส์ ซึ่งอยู่ในระเบียนสุดท้ายออกจากตารางความสัมพันธ์ R1
(เพราะนายเจริญ มั่งมี เป็นอาจารย์ผู้สอนวิชาฟิสิกส์ โดยไม่มีการสูญหายของข้อมูลที่ว่ามีอาจารย์เจริญ มั่งมี สอนวิชา
ฟิสิกส์ ซึ่งอยู่ในตารางความสัมพันธ์ R2

![](/img/5-6.png)

รูปที่ 5.6 ข้อมูลของตารางความสัมพันธ์ที่เป็นรูปแบบบรรทัดฐานบีซีเอ็นเฟ

พิจารณาตัวอย่างเพิ่มเติม ตารางความสัมพันธ์ ใช้บริการอีเมล(<u>ชื่อผู้ใช้</u>, <u>ชื่อผู้ให้บริการ</u>, หมายเลขเครื่องบริการ,
วันที่สมัครใช้บริการ) ซึ่งเป็นรูปแบบบรรทัดฐานที่สาม มีตัวอย่างข้อมูลดังรูปที่ 5.7

![](/img/5-7.png)

รูปที่ 5.7 ตัวอย่างตารางความสัมพันธ์ใช้บริการอีเมล
การพึ่งพิงเชิงหน้าที่ในตารางความสัมพันธ์นี้คือ
- FD1: ชื่อผู้ใช้, ชื่อผู้ให้บริการ > หมายเลขเครื่องบริการ, วันที่สมัครใช้บริการ
- FD2: หมายเลขเครื่องบริการ > ชื่อผู้ให้บริการ

ซึ่งสามารถเขียนเป็นแบบอย่างได้ดังนี้

R(A, B, C, D): A, B > C, D
C > B

สามารถทำให้ตารางความสัมพันธ์ R เป็นรูปแบบบรรทัดฐานบีซีเอ็นเอฟได้โดยแตกออกเป็นตารางความสัมพันธ์
ย่อยสองตาราง R1 และ R2 ซึ่งทั้งคู่เป็นรูปแบบบรรทัดฐานบีซีเอ็นเอฟ ได้ดังนี้

R1(A, C, D): A, C > D

R2(C, B): C > B

ดังนั้นตารางความสัมพันธ์ใช้บริการอีเมลสามารถทำให้เป็นรูปแบบบรรทัดฐานบีซีเอ็นเอฟโดยแบ่งเป็นสอง
ตารางความสัมพันธ์คือ R1(ชื่อผู้ใช้, หมายเลขเครื่องบริการ, วันที่สมัครใช้บริการ) และ R2(หมายเลขเครื่องบริการ, ชื่อ
ผู้ให้บริการ)
มีข้อสังเกตอยู่ว่า ตารางความสัมพันธ์ที่อยู่ในรูปแบบบรรทัดฐานบีซีเอ็นเอฟจะเป็นรูปแบบบรรทัดฐานที่สามด้วย
เสมอ แต่อาจไม่เป็นจริงในทางตรงกันข้ามดังในตัวอย่างตารางความสัมพันธ์สอนและตารางความสัมพันธ์ใช้บริการ
อีเมล

## 5.5. รูปแบบบรรทัดฐานที่สี่ (Forth Normal Form; 4NF)
### 5.5.1. ความสำคัญ

พิจารณาตัวอย่างตารางความสัมพันธ์ผู้สอนและตำราประจำวิชาในรูปที่ 5.8 ซึ่งเป็นรูปแบบบรรทัดฐานบีซีเอ็น
เอฟเพราะไม่มีตัวกำหนด พบว่ายังมีปัญหาความผิดปกติของการปรับข้อมูล กล่าวคือ เนื่องจากในตัวอย่างนี้ วิชาเป็น
ตัวกำหนดว่ากลุ่มของอาจารย์คนใดจะเป็นผู้สอนและกำหนดว่ากลุ่มของตำราเล่มใดบ้างที่ต้องถูกใช้สอนเพื่อให้ได้
มาตรฐานตามหลักสูตร ดังนั้น ถ้ามีอาจารย์คนใหม่ นายเจริญ มั่งมี สอนวิชาฟิสิกส์ด้วย จะต้องทำการเพิ่มระเบียน
ทั้งหมดถึงสองระเบียนคือ <ฟิสิกส์, นายเจริญ มั่งมี, ฟิสิกส์ 1> และ <ฟิสิกส์, นายเจริญ มั่งมี, ฟิสิกส์ 2> แต่ถ้า
อาจารย์รัศมี สุขฤดี ไม่ได้รับผิดชอบการสอนวิชาฟิสิกส์อีกต่อไป จะต้องทำการลบทั้งสองระเบียนแรก หรือถ้ามีการ
กำหนดตำราที่ใช้สอนวิชาฟิสิกส์ใหม่หมด ก็จะต้องเปลี่ยนแปลงถึงสี่ระเบียนแทนที่จะแก้เพียงสองระเบียน ปัญหา
เหล่านี้จะทวีความรุนแรงหากฐานข้อมูลมีการบันทึกหลายวิชา สาเหตุของปัญหาเหล่านี้ คือ การพึ่งพิงแบบหลายค่าใน
ตารางความสัมพันธ์ซึ่งสามารถแก้ไขได้ด้วยรูปแบบบรรทัดฐานที่สี่

![](/img/5-8.png)

### 5.5.2. หลักการแห่งรูปแบบบรรทัดฐานที่สี่
รูปแบบบรรทัดฐานที่สี่มีพื้นฐานอยู่บนหลัก การพึ่งพิงแบบหลายค่ (multivalued dependency, MVD)
ซึ่งถูกนิยามดังนี้ การพึ่งพิงแบบหลายค่าจะมีอยู่ในตารางความสัมพันธ์ใดๆ ก็ต่อเมื่อ

- ถ้าค่าของเชตลักษณะประจำ A กำหนดรูปแบบของค่า (multidetermine) ของเซตลักษณะประจำ B ซึ่งมี
สมาชิกลักษณะประจำไม่ซ้ำกับเชต A แล้ว ค่าของเชต A กำหนดรูปแบบของค่าของเซตลักษณะประจำ C ด้วย
โดยที่ C เป็นเซตลักษณะประจำที่เหลือถ้านำลักษณะประจำของเซต A และ B ออกจากเซตของลักษณะประจำ
ทั้งหมดในตารางความสัมพันธ์
- และการกำหนดรูปแบบค่าของเซต B โดยเชต A เป็นอิสระ (Independent) จากการกำหนดรูปแบบค่าของเชต C โดยเขต A

การพึ่งพิงแบบหลายค่าดังกล่าวนี้เขียนแทนด้วย A >> B แต่เนื่องจากว่า A >> B จะมีอยู่ได้ก็ต้องมี A >> C ด้วยตามที่อธิบาย ดังนั้นในทางปฏิบัติจึงนิยมเขียนแทนการพึ่งพิงแบบหลายค่าทั้งสองนี้ไว้ด้วยกันเสมอเป็น A >> B | C พึงทราบว่าสัญลักษณ์นี้ หมายถึง สองการพึ่งพิงแบบหลายค่า

เพื่อทำความเข้าใจกับความหมายของ การกำหนดรูปแบบของค่า ให้ชัดเจนยิ่งขึ้น พิจารณาตัวอย่างตาราง
ความสัมพันธ์ในรูปที่ 5.8 เนื่องจากวิชาเป็นตัวกำหนดว่ากลุ่มของอาจารย์คนใดจะเป็นผู้สอนวิชานี้ ในที่นี้วิชาฟิสิกส์มี
อาจารย์สอนสองคนคือนางรัศมี สุขฤดี และนายฤกษ์ ธรรมชาติ นั่นคือฟิลด์วิชากำหนดรูปแบบกลุ่มของค่าของฟิลด์
อาจารย์ หรือ วิชา >> อาจารย์ และเนื่องจากวิชาเป็นตัวกำหนดว่ากลุ่มของตำราเล่มใดบ้างที่ต้องใช้ ในที่นี้วิชาฟิสิกส์
ต้องใช้ตำราสองเล่มคือฟิสิกส์ 1 และฟิสิกส์ 2 นั่นคือฟิลด์วิชากำหนดรูปแบบกลุ่มของค่าของฟิลด์ตำรา หรือ วิชา >> ตำรา นอกจากนี้ วิชา >> อาจารย์ ยังเป็นอิสระโดยไม่มีความเกี่ยวข้องกับ วิชา >> ตำรา กล่าวคืออาจารย์ไม่
มีผลต่อการกำหนดตำราและในทางกลับกัน  สรุปได้ว่า ตารางความสัมพันธ์ผู้สอนและตำราประจำวิชานี้มีการพึ่งพิง
แบบหลายค่า วิชา >> อาจารย์ | ตำรา

ความจริงการพึ่งพิงเชิงหน้าที่เป็นกรณีพิเศษของการพึ่งพิงแบบหลายค่เพียงแต่เป็นการกำหนดรูปแบบค่าเพียง
หนึ่งค่า ไม่ใช่กลุ่มของค่าดังในตัวอย่างตารางความสัมพันธ์ผู้สอนและตำราประจำวิชาข้างต้น เช่น ในตัวอย่างตาราง
ความสัมพันธ์ R3 ในรูป 5.3 มีการพึ่งพิงเชิงหน้าที่คือ รหัสผู้เขียน > ชื่อผู้เขียน และ รหัสผู้เขียน > ที่อยู่ผู้เขียน ซึ่งมี
ความหมายว่า รหัสผู้เขียนกำหนดรูปแบบของค่าของชื่อผู้เขียนจำนวนหนึ่งค่า และรหัสผู้เขียนกำหนดรูปแบบของค่า
ของที่อยู่ผู้เขียนจำนวนหนึ่งคำา โดยการกำหนดรูปแบบค่าทั้งสองไม่เกี่ยวข้องกัน ดังนั้นจึงสรุปได้ว่า รหัสผู้เขียน >>
ชื่อผู้เขียน | ที่อยู่ผู้เขียน  สังเกตว่าถ้าการพึ่งพิงแบบหลายค่าเป็นการพึ่งพิงเชิงหน้าที่จะไม่มีปัญหาความผิดปกติของ
การปรับข้อมูล ในทางตรงกันข้ามการพึ่งพิงแบบหลายค่าอาจไม่ใช่การพึ่งพิงเชิงหน้าที่ ดังในตัวอย่างตาราง
ความสัมพันธ์ผู้สอนและตำราประจำวิชาซึ่งไม่มี วิชา > ตำรา และไม่มี วิชา > อาจารย์ เพราะไม่ได้กำหนดรูปแบบค่า
เพียงหนึ่งค่า

> เกณฑ์แห่งการเป็นรูปแบบบรรทัดฐานที่สี ตารางความสัมพันธ์ใดจะอยู่ในรูปแบบบรรทัดฐานที่สี่ก็ต่อเมื่อไม่มีการพึ่งพิงแบบหลายค่า หรือถ้ามี การพึ่งพิงแบบหลายค่าเหล่านั้นจะต้องเป็นการพึ่งพิงเชิงหน้าที่


หลักการสำคัญเพิ่มเติมที่มีพื้นฐานอยู่บนหลักการพึ่งพิงแบบหลายค่าที่ควรทราบ คือ การแตกตาราง
ความสัมพันธ์โดยไม่มีการสูญหายของข้อมูล (lossless decomposition) กล่าวคือ ตารางความสัมพันธ์ R(A, B, C)
จะสามารถถูกแตกเป็นตารางความสัมพันธ์ย่อย R1(A, B) และ R2(A, C) โดยไม่มีการสูญหายของข้อมูล ได้ ก็ต่อเมื่อมี
การพึ่งพิงแบบหลายค่า A >> B | C ในตารางความสัมพันธ์ R

### 5.5.3. การนำไปใช้แก้ปัญหา
เมื่อทดสอบตารางความสัมพันธ์ผู้สอนและตำราประจำวิชาในรูปที่ 5.8 กับเกณฑ์แห่งการเป็นรูปแบบบรรทัดฐานที่สี่
พบว่าตารางความสัมพันธ์นี้ยังไม่เป็นรูปแบบบรรทัดฐานที่สี่เพราะมีการพึ่งพิงแบบหลายค่าซึ่งไม่ใช่เป็นการ
พึ่งพิงเชิงหน้าที่ตามที่อธิบายข้างต้น ในขณะที่ตารางความสัมพันธ์ R3 ในรูป 5.3 เป็นรูปแบบบรรทัดฐานที่สี่แล้ว
เพราะมีการพึ่งพิงแบบหลายค่าซึ่งเป็นการพึ่งพิงเชิงหน้าที่ด้วยดังอธิบายข้างต้น
โดยอาศัยหลักการแตกตารางความสัมพันโดยไม่มีการสูญหายของข้อมูล ตารางความสัมพันธ์ผู้สอนและตำรา
ประจำวิชาสามารถถูกปรับให้อยู่ในรูปแบบบรรทัดฐานที่สี่ได้โดยการแตกตารางออกเป็นสองตารางความสัมพันธ์ดังรูป
ที่ 5.9 ในตาราง R1 แม้ฟิลด์วิชาจะกำหนดรูปแบบของค่าของฟิลด์อาจารย์แต่ไม่มีการพึ่งพิงแบบหลายค่าเพราะ(ฟิลด์
วิชาไม่ได้กำหนดรูปแบบของค่าของฟิลด์อื่นในตารางเดียวกันอีก กล่าวอีกนัยหนึ่ง หากเปรียบฟิลด์วิชาเป็นเชต A ที่
กล่าวในนิยามของการพึ่งพิงแบบหลายค่า และเปรียบลด์อาจารย์เป็นเซต B ตารางความสัมพันธ์นี้ยัง)ขาดฟีลด์ที่เป็น
เชต C จึงไม่มีการพึ่งพิงแบบหลายค่นั้นเอง ดังนั้นตารางความสัมพันธ์ R1 จึงเป็นรูปแบบบรรทัดฐานที่สี่ รวมถึง
ตารางความสัมพันธ์ R2 ก็เป็นรูปแบบบรรทัดฐานที่สี่ด้วยเหตุผลทำนองเดียวกันกับ R1 สังเกตว่าหลังปรับเป็นรูปแบบ
บรรทัดฐานที่สี่แล้ว ปัญหาความผิดปกติของการปรับข้อมูลที่อธิบายช่วงต้นของหัวข้อย่อยนี้ก็หมดไปด้วย

![](/img/5-9.png)

รูปที่ 5.9 ตารางความสัมพันธ์ที่เป็นรูปแบบบรรทัดฐานที่สี่

ในทางปฏิบัติ กระบวนการทำให้เป็นบรรทัดฐานนิยมหยุดอยู่ที่รูปแบบบรรทัดฐานที่สาม, รูปแบบบรรทัดฐานบีซี
เอ็นเอฟ (ส่วนมาก) หรือรูปแบบบรรทัดฐานที่สี่ (ส่วนน้อย) (ถึงแม้ยังอาจปรับให้เป็นรูปแบบบรรทัดฐานระดับสูงกว่า
คือระดับที่ห้าได้ก็ตาม ทั้งนี้เนื่องด้วยเหตุผลสำคัญประการใดประการหนึ่งดังนี้ การทดสอบตารางความสัมพันธ์ตาม
เกณฑ์แห่งการเป็นรูปแบบบรรทัดฐานที่ห้ามีความชับซ้อนค่อนข้างมากและจะยิ่งยากถ้าฐานข้อมูลมีขนาดใหญ่ หรือ
เพราะ)การทำให้เป็นรูปแบบบรรทัดฐานระดับยิ่งสูงยิ่งก่อให้เกิดจำนวนตารางความสัมพันธ์มากขึ้น ซึ่งส่งผลเสียต่อ
ประสิทธิภาพของระบบจัดการฐานข้อมูลในการประมวลคำสั่งงานเควรี่ ดังนั้นจึงขึ้นอยู่กับดุลยพินิจของผู้ออกแบบว่า
ควรทำให้ตารางความสัมพันธ์ใดอยู่ในรูปแบบบรรทัดฐานระดับใดที่จะทำให้ประสิทธิภาพการประมวลผลเป็นไปตาม
ต้องการในขณะที่ปัญหาจากภาวะการพึ่งพิงซึ่งกันและกันของลักษณะประจำภายในตารางความสัมพันธ์ยังอยู่ในระดับ
ที่ยอมรับได้ เพื่อบรรลุสมดุลนี้ ผู้ออกแบบสามารถลดระดับของรูปแบบบรรทัดฐานของตารางความสัมพันธ์ลงโดยการ
วมตารางความสัมพันธ์ย่อยเข้าเป็นตารางความสัมพันธ์เดิมก่อนถูกแตกเพื่อทำให้จำนวนตารางความสัมพันธ์ใน
ฐานข้อมูลลดลง เรียกกระบวนการนี้ว่า ดีนอร์มัลไลเซชัน (denormalization) ซึ่งดำเนินการเช่นเดียวกับการเชื่อม
ตารางความสัมพันธ์ในรูปที่ 5.1 1 คำแนะนำเบื้องต้นเกี่ยวกับการเลือกรูปแบบบรรทัดฐานคือ ถ้าฐานข้อมูลถูกใช้ในการ
ค้นคืนข้อมูลบ่อยกว่าการเพิ่ม ลบ และแก้ไขข้อมูล เช่น ฐานข้อมูลในระบบคลังข้อมูล (data warehouse) ควรทำดี
นอร์มัลไลเซชันเพื่อรวมตารางความสัมพันธ์และเพิ่มประสิทธิภาพการค้นคืนข้อมูล

## 5.6. รูปแบบบรรทัดฐานที่ห้า (Fifth Normal Form; 5NF)
### 5.6.1. ความสำคัญ
เพื่อวิเคราะห์ปัญหาที่ยังอาจมีอยู่ในรูปแบบบรรทัดฐานที่สี่อันนำไปสู่การทำให้เป็นรูปแบบบรรทัดฐานที่ห้า
พิจารณาตัวอย่างตารางความสัมพันธ์ผู้จำหน่าย-วัตถุดิบ-โครงการ ในรูปที่ 5.10

ผู้จำหน่าย | วัตถุดิบ | โครงการ
---- | ---- | ----
บริษัทเหล็กต้นน้ำ | เหล็กเส้น | หมู่บ้านฟ้าใส
บริษัทการช่าง | เหล็กเส้น | หมู่บ้านพอเพียง
บริษัทเหล็กต้นน้ำ | ตะปู | หมู่บ้านพอเพียง
บริษัทเหล็กต้นน้ำ | เหล็กเส้น | หมู่บ้านพอเพียง

รูปที่ 5.10 ตัวอย่างตารางความสัมพันธ์ผู้จำหน่าย-วัตถุดิบ-โครงการ

จะเห็นว่าตารางความสัมพันธ์นี้เป็นรูปแบบบรรทัดฐานที่หนึ่งถึงบีซีเอ็นเอฟ และเป็นรูปแบบบรรทัดฐานที่สี่ด้วย
เพราะไม่มีการพึ่งพิงแบบหลายค่า กล่าวคือ ไม่มีฟิลด์ใดกำหนดรูปแบบค่าของอีกสองฟิลด์ที่เหลือซึ่งทราบได้จากการ
สอบถามจากผู้ใช้ หรือจากการลองพิสูจน์ทุกความเป็นไปได้ในการที่สามฟิลด์นี้จะก่อให้เกิดการพึ่งพาแบบหลายค่า
ตัวอย่างการวิเคราะห์เช่น ลองพิสูจน์ว่า ผู้จำหน่าย >> วัตถุดิบ|โครงการ หรือไม่ จากระเบียนที่หนึ่งและสามใน
ตารางความสัมพันธ์ดูเหมือนว่าฟิลด์ผู้จำหน่ายจะกำหนดรูปแบบค่าของฟิลด์วัตถุดิบและฟิลด์โครงการ เพราะ บริษัท
เหล็กตันน้ำ >> {เหล็ก, ตะปู} และ {หมู่บ้านฟ้าใส, หมู่บ้านพอเพียง} แต่เมื่อพิจารณาระเบียนที่สี่ทำให้สรุปได้ว่าฟิลด์
ผู้จำหน่ายไม่ได้กำหนดรูปแบบค่าของฟิลด์วัตถุดิบและโครงการเพราะมิเช่นนั้นจะต้องมีระเบียน <บริษัทเหล็กตันน้ำ, ตะปู, หมู่บ้านฟ้าใส> ในตารางความสัมพันธ์นี้ด้วย

อย่างไรก็ตาม ค่าข้อมูลส่วนย่อยในตารางความสัมพันธ์นี้มีเงื่อนไขบังคับที่อยู่เบื้องหลัง คือ
- เงื่อนไขที่หนึ่ง: ถ้าบริษัทเหล็กต้นน้ำจำหน่ายเหล็กเส้น (ดังในระเบียนที่หนึ่ง) และ
- เงื่อนไขที่สอง: ถ้าเหล็กเส้นถูกจำหน่ายให้กับโครงการหมู่บ้านพอเพียง (ดังในระเบียนที่สอง) และ
- เงื่อนไขที่สาม: ถ้าบริษัทเหล็กต้นน้ำจำหน่ายวัตถุดิบให้แก่โครงการหมู่บ้านพอเพียง (ดังในระเบียนที่สาม) แล้ว
- ข้อบังคับ: บริษัทเหล็กต้นน้ำต้องมีการจำหน่ายเหล็กเส้นให้แกโครงการหมู่บ้านพอเพียงด้วย (ดังในระเบียนที่สี่)


ถ้ายึดตามเงื่อนไขบังคับนี้ จะหมายความว่า เมื่อใดก็ตามที่มีระเบียนตามเงื่อนไขที่หนึ่งซึ่งเขียนเป็นสัญลักษณ์ได้
ว่า <บริษัท S, วัตถุดิบ M, โครงการใดๆ>, ระเบียนตามเงื่อนไขที่สอง <บริษัทใดๆ, วัตถุดิบ M, โครงการ P> และ
ระเบียนตามเงื่อนไขที่สาม <บริษัท S, วัตถุดิบใดๆ, โครงการ P> จะต้องมีระเบียนซึ่งเป็นข้อบังคับ <บริษัท S, วัตถุดิบ
M, โครงการ P> อยู่ในตารางความสัมพันธ์ด้วยเสมอ เงื่อนไขบังคับนี้นำไปสู่ปัญหาความผิดปกติของการปรับข้อมูล
ถึงแม้ว่าตารางความสัมพันธ์นี้จะเป็นรูปแบบบรรทัดฐานที่สี่แล้วก็ตาม กล่าวคือ สมมติให้ข้อมูลเริ่มต้นในตาราง
ความสัมพันธ์ในรูปที่ 5.10  มีเพียงสองระเบียนแรก  ถ้าทำการเพิ่มระเบียนที่สามก็จะต้องเพิ่มระเบียนที่สี่ด้วยเพราะ
สามระเบียนแรกถือเป็นเงื่อนไขซึ่งครบที่จะทำใให้เกิดข้อบังคับตามระเบียนที่สี่ คือปัญหาความผิดปกติของการเพิ่ม
ข้อมูล นอกจากนี้ยังมีความผิดปกติของการลบข้อมูลคือ ถ้าลบระเบียนที่สามในตารางความสัมพันธ์รูปที่ 5.10 จะต้อง
ลบระเบียนที่สื่ออกไปด้วยเพราะหากขาดเงื่อนไขที่สามก็จะไม่สามารถมีข้อบังคับได้ หรือถ้าเปลี่ยนแปลงค่าข้อมูลเช่น
ชื่อบริษัทเหล็กต้นน้ำในระเบียนที่หนึ่งและสามก็จะต้องตามไปเปลี่ยนแปลงในระเบียนที่สี่ด้วยเสมอ ปัญหาเหล่านี้
แก้ไขได้ด้วยการปรับเป็นรูปแบบบรรทัดฐานที่ห้า

ในความเป็นจริง ข้อบังคับในเงื่อนไขบังคับข้างต้น อาจมิใช่ข้อสรุปจากเงื่อนไขทั้งสาม เพราะแม้เงื่อนไขทั้งสาม
จะเป็นจริงแต่ก็อาจหมายความว่าบริษัทเหล็กต้นน้ำจำหน่ายเหล็กเส้นให้แกโครงการหมู่บ้านอื่นที่ไม่ใช่หมู่บ้านพอเพียง
หรือหมายความว่าบริษัทอื่นที่ไม่ใช่บริษัทเหล็กต้นน้ำจำหน่ายเหล็กเส้นให้แกโครงการหมู่บ้านพอเพียง (เพราะไม่ได้มี
บริษัทเหล็กต้นน้ำเจ้าเดียวที่จำหน่ายเหล็กเส้นให้โครงการหมู่บ้านพอเพียงได้ หรือบริษัทเหล็กต้นน้ำอาจจำหน่ายปูน
ให้แก่โครงการหมู่บ้านพอเพียงก็ได้แทนที่จะเป็นเหล็กเส้น กล่าวอีกนัยหนึ่ง เงื่อนไขบังคับที่ก่อให้เกิดปัญหาซึ่งแก้ไขได้
ด้วยรูปแบบบรรทัดฐานที่ห้านั้นพบได้ค่อนข้างยากในความเป็นจริง เรียกเงื่อนไขบังคับแบบอย่างนี้ว่า เงื่อนไขบังคับ
แบบวน (cyclic constraint)

### 5.6.2. หลักการแห่งรูปแบบบรรทัดฐานที่ห้า
รูปแบบบรรทัดฐานที่ห้ามีพื้นฐานอยู่บนหลัก การพึ่งพิงแบบเชื่อม (join dependency) ซึ่งแสดงด้วย *(R1,
R2,...  Rn) และจะมีอยู่ในตารางความสัมพันธ์ R ก็ต่อเมื่อ R  มีค่าของระเบียนทั้งหมดเหมือนกับของตาราง
ความสัมพันธ์ผลลัพธ์ที่ได้จากการเชื่อมตารางความสัมพันธ์ย่อย R1, R2,... Rn ทั้งหมดเข้าด้วยกัน โดยแต่ละ R1, R2,
.... Rn ประกอบด้วยฟิลด์ต่างๆ ที่เป็นชับเซตของฟิลด์ทั้งหมดในตารางความสัมพันธ์ R และถ้า R1, R2, .... หรือ Rn
เหมือนกับ R การพึ่งพิงแบบเชื่อมนั้นจะถูกเรียกว่า การพึ่งพิงแบบเชื่อมแบบเล็กน้อย (trivial join dependency)

> เกณฑ์แห่งการเป็นรูปแบบบรรทัดฐานที่ห้า ตารางความสัมพันธ์ R จะอยู่ในรูปแบบบรรทัดฐานที่ห้า ก็ต่อเมื่อผ่านเงื่อนไขใดเงื่อนไขหนึ่งต่อไปนี้ เงื่อนไขที่ 1) มีแต่การพึ่งพิงแบบเชื่อมแบบเล็กน้อย เงื่อนไขที่ 2) ถ้ามีการพึ่งพิงแบบเชื่อมแบบไม่เล็กน้อย *(R1, R2, ... Rn) ทุกตารางความสัมพันธ์ย่อย R1, R2, .. Rn ในทุกการทั่งฟิงแบบเชื่อมท้องเป็นรูเปอร์คีย์ในตารางความสัมพันธ์ R

เงื่อนใขที่ 2) สามารถบายอีกนัยหนึ่งได้ว่า ถ้แตกตารางความสับพันธ์ R. เป็นตารางความสัมพ้นธ์ย่อยใน
ลักษณะที่จะส"มารถเชื่อมตารางความสัมพันธ์ย่อยเหล่านี้กลับเป็นดารางความสัมพันธ์ R ได้ ทุกตารางความสัมพันธ์
ย่อยต้องมีกุญแจให้เลือกของดารางความสัมพันธ์ R ปรากฏอยู่ด้วย

### 5.6.3. การนำไปใช้แก้ปัญหา

![](/img/5-11.png)

รูปที่ 5.11 การทดสอบหาการพึ่งพิงแบบเชื่อมของตารางความสัมพันธ์ผู้จำหน่าย-วัตถุดิบ-โครงการ

พิจารณาตารางความสัมพันธ์ผู้จำหน่าย-วัตถุดิบ-โครงการ ในรูปที่ 5.10 อีกครั้ง เมื่อลองทดสอบกับเกณฑ์
แห่งการเป็นรูปแบบบรรทัดฐานที่ห้าเงื่อนไขที่หนึ่งดังรูปที่ 5.1 1 โดยทดลองแตกออกเป็นสามตารางความสัมพันธ์
หมายเหตุ ระเบียนที่ขีดฆ่าคือระเบียนที่ซ้ำในตารางความสัมพันธ์เดียวกันและสามารถลบออกได้โดยไม่มีผลกระทบ
ใดๆ หลังจากนั้นทำการเชื่อมทีละคู่ของตารางย่อย พบว่าเมื่อเชื่อม R1 กับ R2 จะเกิดระเบียนลวงซึ่งไม่มีอยู่ในตาราง
ความสัมพันธ์เดิม แต่หลังจากนำตารางนี้ไปเชื่อมกับ R3 ก็จะทำให้ระเบียนลวงหายไป เพราะใน R3 ไม่มีระเบียน
<ตะปู, หมู่บ้านฟ้าใส> และได้ผลลัพธ์สุดท้ายเป็นตารางความสัมพันธ์เดิม จึงสรุปได้ว่าตารางความสัมพันธ์ผู้จำหน่าย-
วัตถุดิบ-โครงการ มีการพึ่งพิงแบบเชื่อม *(R1(ผู้จำหน่าย, วัตถุดิบ), R2(ผู้จำหน่าย, โครงการ), R3(วัตถุดิบ, โครงการ)
หรือเขียนอีกอย่างหนึ่งว่า *(ผู้จำหน่าย, วัตถุดิบ), (ผู้จำหน่าย, โครงการ), (วัตถุดิบ, โครงการ) อนึ่ง หากทดลองแตก
ตารางความสัมพันธ์วิธีอื่นคือแตกออกเป็นสองตารางย่อย จะพบว่าไม่สามารถเชื่อมกลับคืนให้เป็นตารางความสัมพันธ์
เดิมได้ จึงไม่มีสามารถค้นพบว่ามีการพึ่งพิงแบบเชื่อมได้ด้วยการแตกเป็นเพียงสองตาราง

เมื่อพบว่าตารางความสัมพันธ์ผู้จำหน่าย-วัตถุดิบ-โครงการ มีการพึ่งพิงแบบเชื่อม ก็ไม่ผ่านเงื่อนไขที่หนึ่งของ
เกณฑ์แห่งการเป็นรูปแบบบรรทัดฐานที่ห้า จึงต้องลองทดสอบกับเงื่อนไขที่สองซึ่งไม่ผ่านเช่นกันเพราะซูเปอร์คีย์ของ
ตารางความสัมพันธ์ R ในตัวอย่างคือ (ผู้จำหน่าย, วัตถุดิบ, โครงการ) เป็นไปไม่ได้ที่ตารางความสัมพันธ์ R1, R2 หรือ
R3 จะมีเปอร์คีย์ดังกล่าวอยู่  ดังนั้นจึงสรุปได้ว่าตารางความสัมพันธ์ผู้จำหน่าย-วัตถุดิบ-โครงการ ไม่เป็นรูปแบบ
บรรทัดฐานที่ห้า วิธีการทำให้เป็นรูปแบบบรรขัดฐานที่ห้าคือต้องแตกออกเป็นสามตารางความสัมพันธ์ย่อย R1, R2
และ R3 ดังในรูปที่ 5.11 นั่นเอง และจะพบว่าปัญหาความผิดปกติของการปรับข้อมูลตามที่ได้อธิบายในช่วงต้นของ
หัวข้อย่อย 5.6.1 ก็ถูกกำจัดไปโดยอัตโนมัติ เช่น เมื่อลบระเบียน <บริษัทเหล็กต้นน้ำ, หมู่ข้านพอเพียง> ออกจาก
ตารางความสัมพันธ์ R2 จะพบว่าเมื่อเชื่อมทั้งสามตารางกลับคืนระเบียน <บริษัทเหล็กต้นน้ำ, เหล็กเส้น, หมู่บ้าน
พอเพียง> จะหายไปจากตารางความสัมพันโดยอันมัติ ทำให้เงื่อนไขบังคับแบบวนซึ่งถือว่าเป็นส่วนหนึ่งของความ
ต้องการข้อมูลของผู้ใช้ยังคงถูกรักษาไว้แต่ปัญหาที่เกิดจากเงื่อนไขดังกล่าวถูกกำจัดไป

เมื่อลองย้อนกลับไปพิจารณาตารางความสัมพันธ์ R3 ในรูป 5.3 ซึ่งเป็นรูปแบบบรรทัดฐานที่สี่แล้ว หากลองแตก
เป็นสองตารางความสัมพันธ์ R31(รหัสผู้เขียน, ชื่อผู้เขียน) และ R32(รหัสผู้เขียน, ที่อยู่ผู้เขียน) จะพบว่ามีเพีงหนึ่งการ
พึ่งพิงแบบเชื่อม *(รหัสผู้เขียน, ชื่อผู้เขียน), (รหัสผู้เขียน, ที่อยู่ผู้เขียน) เพราะสามารถเชื่อมกลับเป็นตาราง R3 ได้โดย
การจับคู่ค่าของฟิลด์รหัสผู้เขียน จึงไม่ผ่านเงื่อนไขที่หนึ่งของเกณฑ์แห่งการเป็นรูปแบบบรรขัดฐานที่ห้า เมื่อลอง
ทดสอบกับเงื่อนไขที่สองพบว่า ทุกตารางความสัมพันธ์ย่อย R31 และ R32 มีกุญแจให้เลือกของ R3 คือ รหัสผู้เขียน
อยู่ จึงสรุปได้ว่าตารางความสัมพันธ์ 33 เป็นรูปแบบบรรทัดฐานที่ห้าด้วยโดยไม่จำเป็นต้องแตกเป็นตาราง R31 และ
R32 อีก

ความจริงรูปแบบบรรทัดฐานที่ห้ามีชื่อเรียกอีกชื่อหนึ่งว่า พี่เจเอ็นเอฟ (PJNF: project join normal form)

## 5.7 เทคนิคการทำให้เป็นบรรทัดฐานอย่างเร็ว
เทคนิคต่อไปนี้จะช่วยให้การทำให้เป็นบรรทัดฐานของเค้าร่างเชิงแนวคิดขนาดใหญ่เป็นไปได้อย่างรวดเร็วขึ้น

เทคนิคการพิจารณารูปแบบบรรทัดฐานที่หนึ่ง ทุกตารางความสัมพันธ์ที่แปลงมาจากแบบจำลองอีอาร์ตาม
ขั้นตอนการแปลงแบบจำลองเป็นเค้าร่างเชิงแนวคิดที่นำเสนอในบทที่แล้ว จะเป็นรูปแบบบรรทัดฐานที่หนึ่งเป็นอย่าง
น้อยเสมอ เช่น แบบจำลองในรูปที่ 5.1 ก่อนแปลงเป็นเค้าร่างเชิงแนวคิด ต้องทำการปรับปรุงตามคำแนะนำที่สองของ
แนวทางการปรับปรุงแบบจำลองระหว่างการแบ่งละเอียดในบทที่แล้วซึ่งได้ผลลัพธ์ดังในรูปที่ 5.12

รูปที่ 5.12 แบบจำลองจากรูปที่ 5.1 หลังการปรับปรุงและตารางความสัมพันธ์ที่แปลงได้

ผลการแปลงแบบจำลองนี้เป็นเค้าร่างเชิงแนวคิดจะได้เป็นสองตารางความสัมพันธ์คือ บทความวิชาการ(รหัส
บทความ, ชื่อสถาบัน, ที่อยู่สถาบัน, รหัสบรรณาธิการ, รหัสวารสาร) และ ผู้เขียน(รหัสผู้เขียน, ชื่อผู้เขียน, ที่อยู่ผู้เขียน,
รหัสบทความ)เมื่อทำการพิจารณาตารางความสัมพันธ์ทั้งสองจะพบว่าไม่มีกลุ่มลักษณะประจำที่เกิดซ้ำทั้งในแง่ของ
ตารางแบบที่หนึ่งของรูปที่ 5.1 โดยทราบจากชื่อฟิลด์ และในแง่ของตารางแบบที่สองของรูปที่ 5.1 เพราะทั้งสอง
ตารางความสัมพันธ์มีการพึ่งพิงเชิงหน้าที่จากกุญแจหลักไปยังทุกลักษณะประจำที่เหลือในตารางเดียวกัน
- เทคนิคการพิจารณารูปแบบบรรทัดฐานที่สอง ตารางความสัมพันธ์ใดที่กุญแจหลักไม่ใช่ลักษณะประจำแบบประกอบ จะเป็นรูปแบบบรรทัดฐานที่สอง เพราะไม่มีโอกาสเกิดการพึ่งพิงเชิงหน้าที่บางส่วน
- เทคนิคการพิจารณารูปแบบบรรทัดฐานที่สาม ตารางความสัมพันธ์ใดที่มีลักษณะประจำสามัญน้อยกว่าสองตัวจะเป็นรูปแบบบรรทัดฐานที่สาม เพราะไม่มีโอกาสเกิดการพึ่งพิงเชิงหน้าที่ระหว่างลักษณะประจำสามัญ
- เทคนิคการพิจารณารูปแบบบรรทัดฐานบีซีเอ็นเอฟ ตารางความสัมพันธ์ใดไม่มีลักษณะประจำสามัญเป็นตัวกำหนด จะเป็นรูปแบบบรรทัดฐานบีซีเอ็นเอฟ เพราะตัวกำหนดจะมีกุญแจให้เลือกเป็นสมาชิกอยู่ด้วยจึงเป็นซูเปอร์คีย์เสมอ
- เทคนิคการพิจารณารูปแบบบรรทัดฐานที่สี่ ตารางความสัมพันธ์ใดที่มีฟิลด์สองฟิลด์หรือน้อยกว่า จะเป็นรูปแบบบรรทัดฐานที่สี่ เพราะไม่มีโอกาสเกิดการพึ่งพิงแบบหลายค่าซึ่งต้องอาศัยอย่างน้อยสามฟิลด์
- เทคนิคการพิจารณารูปแบบบรรทัดฐานที่ห้า ตารางความสัมพันธ์ใดที่มีฟิลด์สองฟิลด์หรือน้อยกว่า จะเป็นรูปแบบบรรทัดฐานที่ห้า เพราะมีแต่การพึ่งพิงแบบเชื่อมแบบเล็กน้อย และถ้าตารางความสัมพันธ์มีมากกว่าหรือเท่ากับ 3 ฟีลด์และมีเงื่อนไขบังคับแบบวนจะไม่เป็นรูปแบบบรรทัดฐานที่ห้า

ในการใช้งานเทคนิคเหล่านี้ ถ้าพบว่าตารางความสัมพันธ์ไดไม่ผ่านการทดสอบกับเทคนิคการทำให้เป็นบรรทัด
ฐานอย่างเร็วที่ระดับบรรทัดฐานใด ผู้ออกแบบจะต้องนำตารางความสัมพันธ์นั้นไปทดสอบกับเกณฑ์แห่งการเป็น
รูปแบบบรรทัดฐานที่ระดับนั้นโดยตรงเพื่อทำการวิเคราะห์และปรับตารางความสัมพันธ์ให้เป็นรูปแบบบรรทัดฐานนั้น
ในที่สุด ตัวอย่างเพิ่มเติมของการวิเคราะห์รูปแบบบรรทัดฐานจะนำเสนอในบทชุดกรณีศึกษาการพัฒนาฐานข้อมูลเชิงสัมพันธ์

## สรุป
เค้าร่างเชิงแนวคิดที่ได้จากการแปลงแบบจำลองอีอาร์ หากนำไปสร้างเป็นฐานข้อมูลจริงอาจประสบปัญหาความ
ผิดปกติของการปรับข้อมูล การป้องกันปัญหาเหล่านี้ คือ การทำทุกตารางความสัมพันธ์ในเค้าร่างเชิงแนวคิดให้เป็น
บรรทัดฐาน ซึ่งแบ่งได้ทั้งหมดหกระดับ คือ รูปแบบบรรทัดฐานที่หนึ่งซึ่งมีพื้นฐานอยู่บนหลักการเกิดซ้ำของกลุ่ม
ลักษณะประจำ, รูปแบบบรรทัตฐานที่สองซึ่งมีพื้นฐานอยู่บนหลักการพึ่งพิงเชิงหน้าที่เต็มรูปแบบ, รูปแบบบรรทัดฐาน
ที่สามซึ่งมีพื้นฐานอยู่บนหลักการพึ่งพิงเชิงหน้าที่แบบส่งผ่าน, รูปแบบบรรทัดฐานบีซีเอ็นเอฟซึ่งมีพื้นฐานอยู่บน
หลักการพึ่งพิงเชิงหน้าที่แบบไม่สะท้อนและซูเปอร์คีย์, รูปแบบบรรทัดฐานที่สี่ซึ่งมีพื้นฐานอยู่บนหลักการพึ่งพิงแบบ
หลายค่า และรูปแบบบรรทัดฐานที่ห้าซึ่งมีพื้นฐานอยู่บนหลักการพึ่งพิงแบบเชื่อม

โดยปกติรูปแบบบรรทัดฐานของตารางความสัมพันธ์ใดๆ จะหมายถึง ระดับของรูปแบบบรรทัดฐานสูงสุดที่
ตารางความสัมพันธ์ถูกวิเคราะห์ทดสอบและทำให้ผ่านเกณฑ์แห่งการเป็นรูปแบบบรรทัดฐานในระดับนั้น เช่น รูปแบบ
บรรทัดฐานของตารางความสัมพันธ์ R1 ในรูปที่ 5.11 คือรูปแบบบรรทัดฐานที่ห้า แต่จะไม่บอกว่าเป็นรูปแบบบรรทัด
ฐานที่หนึ่ง, รูปแบบบรรทัดฐานที่สอง, รูปแบบบรรทัดฐานที่สาม, รูปแบบบรรทัดฐานบีซีเอ็นเอฟ และรูปแบบบรรทัด
ฐานที่สี่ด้วย

หลังจากศึกษาวิธีการทำให้เป็นบรรทัดฐานระดับต่างๆ แล้ว บทถัดไปจะอธิบายถึงวิธีใช้เครื่องมือระบบจัดการ
ฐานข้อมูลที่มีชื่อเสียงและภาษาโปรแกรมเอสคิวแอลสำหรับการสร้างฐานข้อมูลเชิงสัมพันธ์จริงจากเค้าร่างเชิงแนวคิด,
แบบจำลองอีอาร์ รวมทั้งพจนานุกรมข้อมูลของแบบจำลอง